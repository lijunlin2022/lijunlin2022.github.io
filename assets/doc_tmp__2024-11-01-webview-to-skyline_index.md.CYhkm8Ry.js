import{_ as i,c as a,ae as e,o as t}from"./chunks/framework.BzDBnRMZ.js";const c=JSON.parse('{"title":"小程序 Webview 转 Skyline 过程总结","description":"","frontmatter":{},"headers":[],"relativePath":"doc/tmp/_2024-11-01-webview-to-skyline/index.md","filePath":"doc/tmp/_2024-11-01-webview-to-skyline/index.md"}'),n={name:"doc/tmp/_2024-11-01-webview-to-skyline/index.md"};function l(r,s,o,p,h,k){return t(),a("div",null,s[0]||(s[0]=[e(`<h1 id="小程序-webview-转-skyline-过程总结" tabindex="-1">小程序 Webview 转 Skyline 过程总结 <a class="header-anchor" href="#小程序-webview-转-skyline-过程总结" aria-label="Permalink to &quot;小程序 Webview 转 Skyline 过程总结&quot;">​</a></h1><h2 id="一、前置条件" tabindex="-1">一、前置条件 <a class="header-anchor" href="#一、前置条件" aria-label="Permalink to &quot;一、前置条件&quot;">​</a></h2><p>app.json 中添加：</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;lazyCodeLoading&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;requiredComponents&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;rendererOptions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;skyline&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;defaultDisplayBlock&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;defaultContentBox&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="二、挑选合适的页面" tabindex="-1">二、挑选合适的页面 <a class="header-anchor" href="#二、挑选合适的页面" aria-label="Permalink to &quot;二、挑选合适的页面&quot;">​</a></h2><p>2、挑选页面，根据 skyline 支持的组件，挑选合适的页面。</p><p><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/runtime/skyline/component.html" target="_blank" rel="noreferrer">https://developers.weixin.qq.com/miniprogram/dev/framework/runtime/skyline/component.html</a></p><h2 id="三、改页面的-json" tabindex="-1">三、改页面的 JSON <a class="header-anchor" href="#三、改页面的-json" aria-label="Permalink to &quot;三、改页面的 JSON&quot;">​</a></h2><p>3、选中页面后，改页面的 json</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;navigationStyle&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;custom&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;componentFramework&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;glass-easel&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;renderer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;skyline&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;disableScroll&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ul><li>navigationStyle 改为 custom，因为 skyline 只支持自定义导航栏</li><li>componentFramework 和 renderer 是官方文档要求添加的</li><li>disableScroll 设置为 true，因为 skyline 禁止页面滚动，只能通过 scroll-view 包裹住元素后，由 scroll-view 进行滚动</li></ul><p><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/runtime/skyline/migration/#%E5%BC%80%E5%A7%8B%E8%BF%81%E7%A7%BB" target="_blank" rel="noreferrer">https://developers.weixin.qq.com/miniprogram/dev/framework/runtime/skyline/migration/#开始迁移</a></p><h2 id="四、改造页面滚动" tabindex="-1">四、改造页面滚动 <a class="header-anchor" href="#四、改造页面滚动" aria-label="Permalink to &quot;四、改造页面滚动&quot;">​</a></h2><table tabindex="0"><thead><tr><th>函数</th><th>改造方法</th></tr></thead><tbody><tr><td>onReachBottom</td><td>bindscrolltolower</td></tr><tr><td>onPullDownRefresh</td><td>bindrefresherrefresh</td></tr><tr><td>wx.pageScrollTo</td><td>ScrollViewContext.scrollTo</td></tr></tbody></table><p>参考：</p><ul><li><a href="https://developers.weixin.qq.com/miniprogram/dev/component/scroll-view.html" target="_blank" rel="noreferrer">https://developers.weixin.qq.com/miniprogram/dev/component/scroll-view.html</a></li><li><a href="https://developers.weixin.qq.com/miniprogram/dev/api/ui/scroll/ScrollViewContext.scrollTo.html" target="_blank" rel="noreferrer">https://developers.weixin.qq.com/miniprogram/dev/api/ui/scroll/ScrollViewContext.scrollTo.html</a></li></ul>`,16)]))}const E=i(n,[["render",l]]);export{c as __pageData,E as default};
