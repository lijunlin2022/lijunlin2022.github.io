"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[216],{52912:(n,r,i)=>{i.r(r),i.d(r,{assets:()=>l,contentTitle:()=>a,default:()=>d,frontMatter:()=>t,metadata:()=>s,toc:()=>c});var e=i(85893),o=i(11151);const t={},a="\u7247\u5143\u7740\u8272\u5668\u52a8\u753b",s={id:"webgl/fragment-shader-animation/index",title:"\u7247\u5143\u7740\u8272\u5668\u52a8\u753b",description:"\u6e10\u5165\u6e10\u51fa",source:"@site/docs/14-webgl/10-fragment-shader-animation/index.md",sourceDirName:"14-webgl/10-fragment-shader-animation",slug:"/webgl/fragment-shader-animation/",permalink:"/docs/webgl/fragment-shader-animation/",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"\u77e9\u9635\u5b9e\u73b0\u5e73\u79fb\u3001\u65cb\u8f6c\u3001\u7f29\u653e",permalink:"/docs/webgl/animation-matrix"},next:{title:"varying \u53d8\u91cf",permalink:"/docs/webgl/varying/"}},l={},c=[{value:"\u6e10\u5165\u6e10\u51fa",id:"\u6e10\u5165\u6e10\u51fa",level:2},{value:"\u5377\u5165\u5377\u51fa",id:"\u5377\u5165\u5377\u51fa",level:2},{value:"\u767e\u53f6\u7a97",id:"\u767e\u53f6\u7a97",level:2}];function g(n){const r={code:"code",h1:"h1",h2:"h2",header:"header",img:"img",p:"p",pre:"pre",...(0,o.a)(),...n.components};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(r.header,{children:(0,e.jsx)(r.h1,{id:"\u7247\u5143\u7740\u8272\u5668\u52a8\u753b",children:"\u7247\u5143\u7740\u8272\u5668\u52a8\u753b"})}),"\n",(0,e.jsx)(r.h2,{id:"\u6e10\u5165\u6e10\u51fa",children:"\u6e10\u5165\u6e10\u51fa"}),"\n",(0,e.jsx)(r.p,{children:(0,e.jsx)(r.img,{src:i(31840).Z+"",width:"375",height:"375"})}),"\n",(0,e.jsx)(r.p,{children:"\u5173\u952e\u4ee3\u7801\u5982\u4e0b\uff1a"}),"\n",(0,e.jsx)(r.pre,{children:(0,e.jsx)(r.code,{className:"language-js",children:"// ... \u7701\u7565\r\n// unifrom \u5fc5\u987b\u5728 main \u51fd\u6570\u5916\u9762\r\nconst FRAGMENT_SHADER_SOURCE = `\r\n  precision lowp float;\r\n  uniform float uOpacity;\r\n  void main() {\r\n    gl_FragColor = vec4(1.0, 0.0, 0.0, uOpacity);\r\n  }\r\n`\r\n// ... \u7701\u7565\r\nlet p = 0\r\nlet increasing = true\r\nfunction animation () {\r\n  if (increasing) {\r\n    p = p + 0.02\r\n    if (p >= 1) {\r\n      p = 1\r\n      increasing = false\r\n    }\r\n  } else {\r\n    p = p - 0.02\r\n    if (p <= 0) {\r\n      p = 0\r\n      increasing = true\r\n    }\r\n  }\r\n  gl.uniform1f(uOpacity, p)\r\n  gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4)\r\n\r\n  requestAnimationFrame(animation)\r\n}\r\n\r\nanimation()\n"})}),"\n",(0,e.jsx)(r.h2,{id:"\u5377\u5165\u5377\u51fa",children:"\u5377\u5165\u5377\u51fa"}),"\n",(0,e.jsx)(r.p,{children:(0,e.jsx)(r.img,{src:i(42650).Z+"",width:"375",height:"375"})}),"\n",(0,e.jsx)(r.p,{children:"\u5173\u952e\u4ee3\u7801\u5982\u4e0b\uff1a"}),"\n",(0,e.jsx)(r.pre,{children:(0,e.jsx)(r.code,{className:"language-js",children:"const VERTEX_SHADER_SOURCE = `\r\n  attribute vec4 aPosition;\r\n  varying vec4 vPosition;\r\n  void main() {\r\n    gl_Position = aPosition;\r\n    vPosition = aPosition;\r\n  }\r\n`\r\n\r\n// \u5411\u4e0a\u5377\u51fa\u65f6\uff0cvPosition.y > uHeight\r\nconst FRAGMENT_SHADER_SOURCE = `\r\n  precision lowp float;\r\n  uniform float uHeight;\r\n  varying vec4 vPosition;\r\n  void main() {\r\n    if (vPosition.y > uHeight) {\r\n      gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);\r\n    } else {\r\n      gl_FragColor = vec4(1.0, 0.0, 0.0, 0.0);\r\n    }\r\n  }\r\n`\r\n\r\n// ... \u7701\u7565\r\nlet p = -1\r\nlet up = true\r\nfunction animation () {\r\n  if (up) {\r\n    p = p + 0.02\r\n    if (p >= 1) {\r\n      p = 1\r\n      up = false\r\n    }\r\n  } else {\r\n    p = p - 0.02\r\n    if (p <= -1) {\r\n      p = -1\r\n      up = true\r\n    }\r\n  }\r\n\r\n  gl.uniform1f(uHeight, p)\r\n  gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4)\r\n\r\n  requestAnimationFrame(animation)\r\n}\r\n\r\nanimation()\n"})}),"\n",(0,e.jsx)(r.h2,{id:"\u767e\u53f6\u7a97",children:"\u767e\u53f6\u7a97"}),"\n",(0,e.jsx)(r.p,{children:(0,e.jsx)(r.img,{src:i(42341).Z+"",width:"375",height:"375"})}),"\n",(0,e.jsx)(r.p,{children:"\u5173\u952e\u4ee3\u7801\u5982\u4e0b\uff1a"}),"\n",(0,e.jsx)(r.pre,{children:(0,e.jsx)(r.code,{className:"language-js",children:"// ... \u7701\u7565\r\nconst FRAGMENT_SHADER_SOURCE = `\r\n  precision lowp float;\r\n  uniform float uHeight;\r\n  varying vec4 vPosition;\r\n  void main() {\r\n    if (vPosition.y < 1.0 && vPosition.y > 0.5) {\r\n      if (vPosition.y > uHeight) {\r\n        gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);\r\n      } else {\r\n        gl_FragColor = vec4(1.0, 0.0, 0.0, 0.0);\r\n      }\r\n    }\r\n    if (vPosition.y < 0.5 && vPosition.y > 0.0) {\r\n      if (vPosition.y > uHeight - 0.5) {\r\n        gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);\r\n      } else {\r\n        gl_FragColor = vec4(1.0, 0.0, 0.0, 0.0);\r\n      }\r\n    }\r\n    if (vPosition.y < 0.0 && vPosition.y > -0.5) {\r\n      if (vPosition.y > uHeight - 1.0) {\r\n        gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);\r\n      } else {\r\n        gl_FragColor = vec4(1.0, 0.0, 0.0, 0.0);\r\n      }\r\n    }\r\n    if (vPosition.y < -0.5 && vPosition.y > -1.0) {\r\n      if (vPosition.y > uHeight - 1.5) {\r\n        gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);\r\n      } else {\r\n        gl_FragColor = vec4(1.0, 0.0, 0.0, 0.0);\r\n      }\r\n    }\r\n  }\r\n`\r\n// ... \u7701\u7565\r\nlet p = 1\r\nfunction animation () {\r\n  p = p - 0.02\r\n\r\n  gl.uniform1f(uHeight, p)\r\n  gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4)\r\n\r\n  requestAnimationFrame(animation)\r\n}\r\n\r\nanimation()\n"})}),"\n",(0,e.jsx)(r.p,{children:"\u52a0\u5165\u5faa\u73af\u540e\u4ee3\u7801\u5982\u4e0b\uff1a"}),"\n",(0,e.jsx)(r.pre,{children:(0,e.jsx)(r.code,{className:"language-js",children:"// ... \u7701\u7565\r\nconst FRAGMENT_SHADER_SOURCE = `\r\n  precision lowp float;\r\n  uniform float uHeight;\r\n  varying vec4 vPosition;\r\n  uniform float uList[5];\r\n  void main() {\r\n    for (int i = 0; i < 4; i++) {\r\n      if (vPosition.y > uList[i + 1] && vPosition.y < uList[i]) {\r\n        if (vPosition.y > uHeight - float(i) * 0.5) {\r\n          gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);\r\n        }\r\n      }\r\n    }\r\n  }\r\n`\r\n// ... \u7701\u7565\r\ngl.uniform1fv(uList, [1.0, 0.5, 0.0, -0.5, -1.0])\r\n// ... \u7701\u7565\n"})})]})}function d(n={}){const{wrapper:r}={...(0,o.a)(),...n.components};return r?(0,e.jsx)(r,{...n,children:(0,e.jsx)(g,{...n})}):g(n)}},42650:(n,r,i)=>{i.d(r,{Z:()=>e});const e=i.p+"assets/images/-1-0-1-height-4922061c6d94bf030f0b0572ed3650fd.gif"},31840:(n,r,i)=>{i.d(r,{Z:()=>e});const e=i.p+"assets/images/0-1-0-opacity-307b60706242108fbd73a265dfa6207b.gif"},42341:(n,r,i)=>{i.d(r,{Z:()=>e});const e=i.p+"assets/images/shutter-53c2295c32f8b4e281d7bdb0f2ceb0e7.gif"},11151:(n,r,i)=>{i.d(r,{Z:()=>s,a:()=>a});var e=i(67294);const o={},t=e.createContext(o);function a(n){const r=e.useContext(t);return e.useMemo((function(){return"function"==typeof n?n(r):{...r,...n}}),[r,n])}function s(n){let r;return r=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:a(n.components),e.createElement(t.Provider,{value:r},n.children)}}}]);