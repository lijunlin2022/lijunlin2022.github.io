"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[3104],{80450:(r,e,n)=>{n.r(e),n.d(e,{assets:()=>s,contentTitle:()=>c,default:()=>i,frontMatter:()=>o,metadata:()=>l,toc:()=>g});var a=n(85893),t=n(11151);const o={},c="\u9876\u70b9\u7740\u8272\u5668\u548c\u7247\u5143\u7740\u8272\u5668",l={id:"webgl/vertex-and-fragment",title:"\u9876\u70b9\u7740\u8272\u5668\u548c\u7247\u5143\u7740\u8272\u5668",description:"\u7740\u8272\u5668\uff0c\u5c31\u662f\u8ba9\u5f00\u53d1\u8005\u81ea\u5df1\u53bb\u7f16\u5199\u4e00\u6bb5\u7a0b\u5e8f\uff0c\u7528\u6765\u4ee3\u66ff\u56fa\u5b9a\u6e32\u67d3\u7ba1\u7ebf\uff0c\u6765\u5904\u7406\u56fe\u7247\u7684\u6e32\u67d3\u3002",source:"@site/docs/14-webgl/01-vertex-and-fragment.md",sourceDirName:"14-webgl",slug:"/webgl/vertex-and-fragment",permalink:"/docs/webgl/vertex-and-fragment",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"\u5b95\u673a\u6062\u590d",permalink:"/docs/go/recover"},next:{title:"\u5750\u6807\u7cfb",permalink:"/docs/webgl/xyz"}},s={},g=[];function d(r){const e={code:"code",h1:"h1",p:"p",pre:"pre",...(0,t.a)(),...r.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e.h1,{id:"\u9876\u70b9\u7740\u8272\u5668\u548c\u7247\u5143\u7740\u8272\u5668",children:"\u9876\u70b9\u7740\u8272\u5668\u548c\u7247\u5143\u7740\u8272\u5668"}),"\n",(0,a.jsx)(e.p,{children:"\u7740\u8272\u5668\uff0c\u5c31\u662f\u8ba9\u5f00\u53d1\u8005\u81ea\u5df1\u53bb\u7f16\u5199\u4e00\u6bb5\u7a0b\u5e8f\uff0c\u7528\u6765\u4ee3\u66ff\u56fa\u5b9a\u6e32\u67d3\u7ba1\u7ebf\uff0c\u6765\u5904\u7406\u56fe\u7247\u7684\u6e32\u67d3\u3002"}),"\n",(0,a.jsx)(e.p,{children:"\u9876\u70b9\u7740\u8272\u5668\uff0c\u4e09\u7ef4\u7684\u5750\u6807\uff1b\u7247\u5143\u7740\u8272\u5668\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a\u4e00\u4e2a\u50cf\u7d20\u3002JavaScript \u8bfb\u53d6\u76f8\u5173\u7740\u8272\u5668\u4fe1\u606f\uff0c\u4f20\u9012\u7ed9 webgl \u5e76\u8fdb\u884c\u4f7f\u7528\u3002"}),"\n",(0,a.jsx)(e.p,{children:"\u6700\u57fa\u7840\u7684\uff0c\u7ed8\u5236\u4e00\u4e2a\u70b9\u7684 webgl \u7a0b\u5e8f\uff1a"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-html",children:'<canvas id="canvas" width="400" height="400"></canvas>\n'})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-js",children:"const canvas = document.getElementById('canvas')\r\nconst gl = canvas.getContext('webgl')\r\n\r\nconst VERTEX_SHADER_SOURCE = `\r\n  void main() {\r\n    // \u8981\u7ed8\u5236\u7684\u70b9\u5750\u6807\u5206\u522b\u662f x y z \u548c w, \u5176\u4e2d w \u662f\u5176\u6b21\u5750\u6807 (x/w, y/w, z/w)\r\n    gl_Position = vec4(0.0, 0.0, 0.0, 1.0);\r\n    // \u70b9\u7684\u5927\u5c0f\r\n    gl_PointSize = 40.0;\r\n  }\r\n`\r\n\r\n\r\nconst FRAGMENT_SHADER_SOURCE = `\r\n  void main() {\r\n    // \u989c\u8272, \u5176\u4e2d\u5206\u522b\u662f r g b \u548c a\r\n    gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);\r\n  }\r\n`\r\n\r\n// \u521b\u5efa\u7740\u8272\u5668\r\nconst vertexShader = gl.createShader(gl.VERTEX_SHADER)\r\nconst fragementShader = gl.createShader(gl.FRAGMENT_SHADER)\r\n\r\n// \u7ed1\u5b9a\u6e90\u7801\r\ngl.shaderSource(vertexShader, VERTEX_SHADER_SOURCE)\r\ngl.shaderSource(fragementShader, FRAGMENT_SHADER_SOURCE)\r\n\r\n// \u7f16\u8bd1\u7740\u8272\u5668\r\ngl.compileShader(vertexShader)\r\ngl.compileShader(fragementShader)\r\n\r\n// \u521b\u5efa\u4e00\u4e2a\u7a0b\u5ea6\u5bf9\u8c61\r\nconst program = gl.createProgram()\r\n\r\ngl.attachShader(program, vertexShader)\r\ngl.attachShader(program, fragementShader)\r\n\r\ngl.linkProgram(program)\r\ngl.useProgram(program)\r\n\r\n// \u6267\u884c\u7ed8\u5236, \u53c2\u6570\u5206\u522b\u4ee3\u8868: \u8981\u7ed8\u5236\u7684\u56fe\u50cf, \u5f00\u59cb\u4f4d\u7f6e, \u4f7f\u7528\u51e0\u4e2a\u9876\u70b9\r\ngl.drawArrays(gl.POINTS, 0, 1)\n"})}),"\n",(0,a.jsx)(e.p,{children:"\u5176\u4e2d\uff0c\u9876\u70b9\u7740\u8272\u5668\u548c\u7247\u5143\u7740\u8272\u5668\u7a0b\u5e8f\u4e2d\uff0c\u5fc5\u987b\u6709\u5206\u53f7\u3002"}),"\n",(0,a.jsx)(e.p,{children:"\u4e0a\u8ff0 js \u4ee3\u7801\u4e2d\uff0c\u53ef\u4ee5\u5c01\u88c5\u4e00\u4e2a\u521d\u59cb\u5316\u7740\u8272\u5668\u7684\u51fd\u6570\uff1a"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-js",children:"function initShader(gl, vertexSource, fragementSource) {\r\n  const vertexShader = gl.createShader(gl.VERTEX_SHADER)\r\n  const fragementShader = gl.createShader(gl.FRAGMENT_SHADER)\r\n\r\n  // \u7ed1\u5b9a\u6e90\u7801\r\n  gl.shaderSource(vertexShader, VERTEX_SHADER_SOURCE)\r\n  gl.shaderSource(fragementShader, FRAGMENT_SHADER_SOURCE)\r\n\r\n  // \u7f16\u8bd1\u7740\u8272\u5668\r\n  gl.compileShader(vertexShader)\r\n  gl.compileShader(fragementShader)\r\n\r\n  // \u521b\u5efa\u4e00\u4e2a\u7a0b\u5ea6\u5bf9\u8c61\r\n  const program = gl.createProgram()\r\n\r\n  gl.attachShader(program, vertexShader)\r\n  gl.attachShader(program, fragementShader)\r\n\r\n  gl.linkProgram(program)\r\n  gl.useProgram(program)\r\n\r\n  return program\r\n}\n"})})]})}function i(r={}){const{wrapper:e}={...(0,t.a)(),...r.components};return e?(0,a.jsx)(e,{...r,children:(0,a.jsx)(d,{...r})}):d(r)}},11151:(r,e,n)=>{n.d(e,{Z:()=>l,a:()=>c});var a=n(67294);const t={},o=a.createContext(t);function c(r){const e=a.useContext(o);return a.useMemo((function(){return"function"==typeof r?r(e):{...e,...r}}),[e,r])}function l(r){let e;return e=r.disableParentContext?"function"==typeof r.components?r.components(t):r.components||t:c(r.components),a.createElement(o.Provider,{value:e},r.children)}}}]);