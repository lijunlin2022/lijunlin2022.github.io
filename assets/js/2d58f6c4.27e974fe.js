"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[9663],{28791:(s,e,n)=>{n.r(e),n.d(e,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>o,toc:()=>c});var i=n(85893),t=n(11151);const r={},l="mdbook",o={id:"tool/mdbook/index",title:"mdbook",description:"GitHub Pages",source:"@site/docs/12-tool/mdbook/index.md",sourceDirName:"12-tool/mdbook",slug:"/tool/mdbook/",permalink:"/docs/tool/mdbook/",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"git",permalink:"/docs/tool/git/"},next:{title:"prettier",permalink:"/docs/tool/prettier/"}},d={},c=[{value:"GitHub Pages",id:"github-pages",level:2},{value:"GitHub Issues",id:"github-issues",level:2},{value:"\u4e2d\u6587\u641c\u7d22",id:"\u4e2d\u6587\u641c\u7d22",level:2},{value:"mermaid",id:"mermaid",level:2},{value:"404",id:"404",level:2},{value:"sitemap",id:"sitemap",level:2}];function a(s){const e={a:"a",code:"code",h1:"h1",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",...(0,t.a)(),...s.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.h1,{id:"mdbook",children:"mdbook"}),"\n",(0,i.jsx)(e.h2,{id:"github-pages",children:"GitHub Pages"}),"\n",(0,i.jsx)(e.p,{children:"\u901a\u8fc7\u4f7f\u7528 GitHub Actions \u7684 workflow\uff08\u5de5\u4f5c\u6d41\uff09\u7684\u6a21\u677f\uff0c\u6211\u4eec\u53ef\u4ee5\u5feb\u901f\u90e8\u7f72\u7f51\u7ad9\u5230 github.io \u57df\u540d\u4e0b\u3002"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsx)(e.li,{children:"GitHub \u4ed3\u5e93\u4e2d\uff0c\u9009\u62e9 Settings -> Pages -> GitHub Actions -> browse all workflows"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:n(98976).Z+"",width:"1363",height:"551"})}),"\n",(0,i.jsxs)(e.ol,{start:"2",children:["\n",(0,i.jsx)(e.li,{children:"\u70b9\u51fb Pages \u53f3\u4fa7\u7684 View all \u6309\u94ae"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:n(61595).Z+"",width:"1174",height:"224"})}),"\n",(0,i.jsxs)(e.ol,{start:"3",children:["\n",(0,i.jsx)(e.li,{children:"\u9009\u62e9 mdBook\uff0c\u70b9\u51fb Configure \u6309\u94ae"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:n(5950).Z+"",width:"1152",height:"766"})}),"\n",(0,i.jsxs)(e.ol,{start:"4",children:["\n",(0,i.jsx)(e.li,{children:"\u4e4b\u540e GitHub \u4f1a\u81ea\u52a8\u521b\u5efa\u4e00\u4e2a yml \u6587\u4ef6"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:n(50348).Z+"",width:"1524",height:"754"})}),"\n",(0,i.jsxs)(e.ol,{start:"5",children:["\n",(0,i.jsxs)(e.li,{children:["\u6211\u4eec\u53ef\u4ee5\u5c06\u6574\u4e2a\u4ed3\u5e93\u514b\u9686\u5230\u672c\u5730\uff0c\u6309\u7167 ",(0,i.jsx)(e.a,{href:"https://rust-lang.github.io/mdBook/",children:"mdBook \u5b98\u65b9\u6307\u5357"})," \u7684\u6307\u5bfc\u4e66\u5199 Markdown \u6587\u4ef6\u3002\u5f53\u6211\u4eec\u63d0\u4ea4\u540e\uff0c\u4f1a\u81ea\u52a8\u89e6\u53d1 GitHub Actions \u5c06\u7f51\u7ad9\u90e8\u7f72\u5230 GitHub Pages \u4e0b\u3002"]}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"github-issues",children:"GitHub Issues"}),"\n",(0,i.jsxs)(e.p,{children:["mdBook \u672c\u8eab\u5e76\u4e0d\u652f\u6301\u8bc4\u8bba\uff0c\u4f46\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 ",(0,i.jsx)(e.a,{href:"https://utteranc.es/",children:"utterances"})," \u8fd9\u4e2a\u8bc4\u8bba\u63d2\u4ef6\uff0c\u5f88\u65b9\u4fbf\u5feb\u6377\u5730\u6dfb\u52a0\u8bc4\u8bba\u529f\u80fd\u3002"]}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:["\u5728 GitHub \u65b0\u5efa\u4e00\u4e2a\u7528\u4e8e\u8bc4\u8bba\u7684\u4ed3\u5e93\u3002\u6bd4\u5982\u6211\u5355\u72ec\u65b0\u5efa\u4e86\u4e00\u4e2a ",(0,i.jsx)(e.a,{href:"https://github.com/lijunlin2022/blog-issues",children:"blog-issues"})]}),"\n",(0,i.jsxs)(e.li,{children:["\u8bbf\u95ee ",(0,i.jsx)(e.a,{href:"https://github.com/apps/utterances",children:"utterances \u7684\u914d\u7f6e\u754c\u9762"})," \uff0c\u70b9\u51fb ",(0,i.jsx)(e.code,{children:"Configure"}),"\uff0c\u7136\u540e\u9009\u62e9\u7528\u4e8e\u8bc4\u8bba\u7684\u4ed3\u5e93\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:["\u5728 mdBook \u7684 Markdown \u6587\u4ef6\u5e95\u90e8\uff0c\u52a0\u5165\u4e00\u6bb5 script \u4ee3\u7801\u3002\u6211\u4eec\u53ea\u9700\u8981\u586b\u5199 ",(0,i.jsx)(e.code,{children:"repo"}),"\uff08\u4ed3\u5e93\u540d\uff09\u548c ",(0,i.jsx)(e.code,{children:"issue-term"}),"\uff08issue \u5206\u7ec4\uff0c\u53ef\u4ee5\u76f4\u63a5\u5199\u6587\u7ae0\u540d\uff09\u3002"]}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-html",children:'<script\r\n  src="https://utteranc.es/client.js"\r\n  repo="lijunlin2022/blog-issues"\r\n  issue-term="mdbook-github-issues"\r\n  theme="github-light"\r\n  crossorigin="anonymous"\r\n  async\r\n>\r\n<\/script>\n'})}),"\n",(0,i.jsx)(e.h2,{id:"\u4e2d\u6587\u641c\u7d22",children:"\u4e2d\u6587\u641c\u7d22"}),"\n",(0,i.jsx)(e.p,{children:"mdBook \u751f\u6210\u7684\u6587\u6863\u548c\u4e66\u8bb0\uff0c\u9ed8\u8ba4\u53ea\u652f\u6301\u82f1\u6587\u641c\u7d22\uff0c\u5176\u5b9e\u6211\u4eec\u53ea\u9700\u8981\u51e0\u4e2a\u7b80\u5355\u7684\u914d\u7f6e\uff0c\u5c31\u53ef\u4ee5\u8ba9 mdBook \u751f\u6210\u7684 HTML \u652f\u6301\u4e2d\u6587\u641c\u7d22\u3002"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsx)(e.li,{children:"\u65b0\u5efa\u4e00\u4e2a\u548c src \u540c\u7ea7\u7684\u6587\u4ef6\u5939 assets\u3002"}),"\n",(0,i.jsxs)(e.li,{children:["\u5c06 ",(0,i.jsx)(e.a,{href:"https://gist.github.com/lijunlin2022/1a9d90b078422192b51392c92e3a9dba",children:"fzf.umd.js"})," \u548c ",(0,i.jsx)(e.a,{href:"https://gist.github.com/lijunlin2022/1a9d90b078422192b51392c92e3a9dba",children:"elasticlunr.js"})," \u6587\u4ef6\u653e\u5230 assets \u76ee\u5f55\u4e0b\u3002"]}),"\n",(0,i.jsx)(e.li,{children:"\u5728 book.toml \u7684\u914d\u7f6e\u4e2d\u6dfb\u52a0\u914d\u7f6e"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:'[output.html]\r\nadditional-js = ["assets/fzf.umd.js", "assets/elasticlunr.js"]\n'})}),"\n",(0,i.jsx)(e.h2,{id:"mermaid",children:"mermaid"}),"\n",(0,i.jsx)(e.p,{children:"mdbook \u9ed8\u8ba4\u5e76\u4e0d\u652f\u6301\u4f7f\u7528 mermaid \u753b\u56fe\u3002\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u5b89\u88c5\u63d2\u4ef6\u7684\u65b9\u5f0f\uff0c\u8ba9 mdbook \u652f\u6301\u8fd9\u4e2a\u529f\u80fd\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\uff081\uff09\u5b89\u88c5 mdbook-mermaid"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"cargo install mdbook-mermaid\n"})}),"\n",(0,i.jsx)(e.p,{children:"\uff082\uff09\u5728 book.toml \u4e2d\u53ef\u4ee5\u6dfb\u52a0\u5982\u4e0b\u914d\u7f6e\u3002"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-toml",children:'[preprocessor.mermaid]\r\ncommand = "mdbook-mermaid"\r\n\r\n[output.html]\r\nadditional-js = ["assets/mermaid.min.js", "assets/mermaid-init.js"]\n'})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.a,{href:"https://github.com/badboy/mdbook-mermaid",children:"mdbook-mermaid"})," \u662f\u4e00\u4e2a\u5f00\u6e90\u63d2\u4ef6\u3002"]}),"\n",(0,i.jsx)(e.p,{children:"\uff083\uff09\u62f7\u8d1d mermaid \u5230\u4e0e src \u540c\u7ea7\u7684 assets \u6587\u4ef6\u5939\u4e2d\u3002"}),"\n",(0,i.jsx)(e.p,{children:"mermaid-init.js \u7528\u6765\u521d\u59cb\u5316 mermaid\uff0c\u5185\u5bb9\u4e3a\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-js",children:"mermaid.initialize({ startOnLoad: true });\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u81f3\u4e8e mermaid.min.js\uff0c\u53ef\u4ee5\u53bb ",(0,i.jsx)(e.a,{href:"https://mermaid.js.org/",children:"mermaid \u5b98\u7f51"}),"\uff0c\u627e\u5230\u5b83\u7684 ",(0,i.jsx)(e.a,{href:"https://cdn.jsdelivr.net/npm/mermaid@10.2.0/dist/mermaid.min.js",children:"CDN \u5730\u5740"})," \u62f7\u8d1d\u3002"]}),"\n",(0,i.jsxs)(e.p,{children:["\u4e4b\u540e\u91cd\u65b0\u8fd0\u884c ",(0,i.jsx)(e.code,{children:"mdbook serve"})," \u547d\u4ee4\uff0c\u5c31\u53ef\u4ee5\u770b\u5230 mdbook \u5df2\u7ecf\u652f\u6301 mermaid \u753b\u56fe\u529f\u80fd\u4e86\u3002"]}),"\n",(0,i.jsx)(e.p,{children:"(4) \u66f4\u65b0\u90e8\u7f72\u811a\u672c"}),"\n",(0,i.jsx)(e.p,{children:"\u5982\u679c\u4f60\u548c\u6211\u4e00\u6837\uff0c\u4f7f\u7528\u7684\u662f GitHub Pages \u90e8\u7f72\u535a\u5ba2\uff0c\u90a3\u4e48\u4f60\u9700\u8981\u66f4\u6539 yml\u3002"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yml",children:"jobs:\r\n  # Build job\r\n  build:\r\n    runs-on: ubuntu-latest\r\n    env:\r\n      MDBOOK_VERSION: 0.4.21\r\n    steps:\r\n      - uses: actions/checkout@v3\r\n      - name: Install mdBook\r\n        run: |\r\n          curl --proto '=https' --tlsv1.2 https://sh.rustup.rs -sSf -y | sh\r\n          rustup update\r\n          cargo install --version ${MDBOOK_VERSION} mdbook\r\n          cargo install mdbook-mermaid\n"})}),"\n",(0,i.jsx)(e.h2,{id:"404",children:"404"}),"\n",(0,i.jsx)(e.p,{children:"\u6211\u4eec\u53ef\u4ee5\u7ed9\u7f51\u7ad9\u8bbe\u7f6e 404 \u9875\u9762\uff0c\u8fd9\u6837\u5f53\u7528\u6237\u8bbf\u95ee\u5230\u7f51\u7ad9\u4e0d\u5b58\u5728\u7684\u94fe\u63a5\u65f6\uff0c\u4f1a\u8df3\u8f6c\u5230 404 \u9875\u9762\uff0c\u63d0\u9ad8\u7528\u6237\u7684\u4f53\u9a8c\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cmdBook \u53ea\u9700\u8981\u5728 src \u76ee\u5f55\u4e0b\u6dfb\u52a0 404.md\uff0c404 \u9875\u9762\u4fbf\u4f1a\u663e\u793a 404.md \u7684\u5185\u5bb9\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u6211\u4eec\u4e5f\u53ef\u4ee5\u901a\u8fc7\u4fee\u6539 book.toml \u4e2d\u7684\u914d\u7f6e\uff0c\u6539\u53d8 404 \u9875\u9762\u7684\u8def\u5f84\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-toml",children:'[output.html]\r\ninput-404 = "404.md"\n'})}),"\n",(0,i.jsx)(e.p,{children:"\u9664\u6b64\u4e4b\u5916\uff0c\u6211\u4eec\u8fd8\u9700\u8981\u8bbe\u7f6e site-url\uff0csite-url \u4e00\u822c\u8bbe\u7f6e\u4e3a\u7f51\u7ad9\u7684\u6839\u8def\u5f84\uff0c\u786e\u4fdd 404 \u9875\u9762\u4e5f\u80fd\u6b63\u5e38\u83b7\u53d6\u811a\u672c\u548c\u6837\u5f0f\u6587\u4ef6\u3002"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-toml",children:'[output.html]\r\nsite-url = "https://lijunlin2022.github.io/blog/"\n'})}),"\n",(0,i.jsx)(e.h2,{id:"sitemap",children:"sitemap"}),"\n",(0,i.jsxs)(e.p,{children:["\u5982\u679c\u6211\u4eec\u80fd\u591f\u7ed9\u641c\u7d22\u5f15\u64ce\u63d0\u4f9b ",(0,i.jsx)(e.a,{href:"https://developers.google.com/search/docs/crawling-indexing/sitemaps/build-sitemap?hl=zh-cn",children:"sitemap.xml"}),"\uff0c\u90a3\u4e48\u5b83\u6293\u53d6 mdbook \u751f\u6210\u7684\u7f51\u7ad9\u5c31\u4f1a\u66f4\u52a0\u5feb\u901f\u3002"]}),"\n",(0,i.jsx)(e.p,{children:"\u76ee\u524d mdbook \u6ca1\u6709\u63d0\u4f9b\u751f\u6210 sitemap.xml \u7684\u63d2\u4ef6\uff0c\u4f46\u662f\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 node.js \u7684\u63d2\u4ef6\u3002"}),"\n",(0,i.jsxs)(e.p,{children:["\u8fd9\u91cc\u6211\u9009\u4e2d\u4e86\u4e00\u6b3e\u63d2\u4ef6\uff0c\u540d\u53eb ",(0,i.jsx)(e.a,{href:"https://github.com/zerodevx/static-sitemap-cli",children:"static-sitemap-cli"}),"\u3002"]}),"\n",(0,i.jsx)(e.p,{children:"\u6211\u4eec\u53ea\u9700\u8981\u7b80\u5355\u7684\u4e24\u4e2a\u6b65\u9aa4\uff0c\u5c31\u53ef\u4ee5\u751f\u6210\u81ea\u5df1\u7684 sitemap.xml\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\uff081\uff09\u5b89\u88c5 static-sitemap-cli"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"npm install static-sitemap-cli\n"})}),"\n",(0,i.jsx)(e.p,{children:"\uff082\uff09\u751f\u6210\u7ad9\u70b9\u5730\u56fe\u5230 book \u6587\u4ef6\u5939\u4e0b"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"npx sscli --base https://lijunlin2022.github.io/blog/ -r book\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u8fd9\u6837\u4fbf\u5b8c\u6210\u4e86\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u4e0d\u8fc7\uff0c\u6211\u7684\u6700\u7ec8\u76ee\u7684\u662f\uff0c\u6bcf\u5f53\u6211\u6709\u65b0\u535a\u5ba2\u63d0\u4ea4\u65f6\uff0c\u90fd\u4f1a\u81ea\u52a8\u66f4\u65b0 sitemap.xml \u5e76\u90e8\u7f72\uff0c\u56e0\u6b64\u6211\u9700\u8981\u6539\u9020\u4e00\u4e0b\u539f\u6709\u7684 yml \u6587\u4ef6\u3002"}),"\n",(0,i.jsxs)(e.p,{children:["\u5177\u4f53\u53ef\u4ee5\u53c2\u8003 ",(0,i.jsx)(e.a,{href:"https://github.com/lijunlin2022/blog/blob/main/.github/workflows/mdbook.yml",children:"https://github.com/lijunlin2022/blog/blob/main/.github/workflows/mdbook.yml"}),"\u3002"]}),"\n",(0,i.jsxs)(e.p,{children:["\u4ee5\u6211\u7684\u535a\u5ba2\u4e3a\u4f8b\uff0c\u8bbf\u95ee ",(0,i.jsx)(e.a,{href:"https://lijunlin2022.github.io/blog/sitemap.xml",children:"https://lijunlin2022.github.io/blog/sitemap.xml"})," \u4fbf\u53ef\u4ee5\u770b\u5230 sitemap.xml \u6587\u4ef6\u4e86\u3002"]})]})}function h(s={}){const{wrapper:e}={...(0,t.a)(),...s.components};return e?(0,i.jsx)(e,{...s,children:(0,i.jsx)(a,{...s})}):a(s)}},98976:(s,e,n)=>{n.d(e,{Z:()=>i});const i=n.p+"assets/images/mdbook1-4692026327d4c8cb10de9c1a7ce51c28.png"},61595:(s,e,n)=>{n.d(e,{Z:()=>i});const i=n.p+"assets/images/mdbook2-ea06f3d3b4a8996d5ac7af6f95f97045.png"},5950:(s,e,n)=>{n.d(e,{Z:()=>i});const i=n.p+"assets/images/mdbook3-956407e48fba8f6d1ddfb1b635fbf276.png"},50348:(s,e,n)=>{n.d(e,{Z:()=>i});const i=n.p+"assets/images/mdbook4-a9a2962af41ae05f996668fa2efe88b6.png"},11151:(s,e,n)=>{n.d(e,{Z:()=>o,a:()=>l});var i=n(67294);const t={},r=i.createContext(t);function l(s){const e=i.useContext(r);return i.useMemo((function(){return"function"==typeof s?s(e):{...e,...s}}),[e,s])}function o(s){let e;return e=s.disableParentContext?"function"==typeof s.components?s.components(t):s.components||t:l(s.components),i.createElement(r.Provider,{value:e},s.children)}}}]);