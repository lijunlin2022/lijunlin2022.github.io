"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[7563],{53648:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>d,contentTitle:()=>s,default:()=>a,frontMatter:()=>o,metadata:()=>c,toc:()=>f});var t=n(85893),i=n(11151);const o={},s="defer",c={id:"go/defer",title:"defer",description:"defer \u662f go \u8bed\u8a00\u7684\u5ef6\u8fdf\u6267\u884c\u8bed\u53e5\u3002\u6dfb\u52a0 defer \u7684\u8bed\u53e5\uff0c\u4f1a\u88ab\u653e\u5230\u51fd\u6570\u8fd4\u56de\u524d\u5904\u7406\u3002",source:"@site/docs/13-go/11-defer.md",sourceDirName:"13-go",slug:"/go/defer",permalink:"/docs/go/defer",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:11,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"\u65f6\u95f4",permalink:"/docs/go/time"},next:{title:"\u9519\u8bef",permalink:"/docs/go/error"}},d={},f=[];function l(e){const r={code:"code",h1:"h1",p:"p",pre:"pre",...(0,i.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.h1,{id:"defer",children:"defer"}),"\n",(0,t.jsx)(r.p,{children:"defer \u662f go \u8bed\u8a00\u7684\u5ef6\u8fdf\u6267\u884c\u8bed\u53e5\u3002\u6dfb\u52a0 defer \u7684\u8bed\u53e5\uff0c\u4f1a\u88ab\u653e\u5230\u51fd\u6570\u8fd4\u56de\u524d\u5904\u7406\u3002"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-go",children:"// \u6700\u7ec8\u7ed3\u679c\u662f 0 2 1\r\nfunc main() {\r\n  fmt.Println(0)\r\n  defer fmt.Println(1)\r\n  fmt.Println(2)\r\n}\n"})}),"\n",(0,t.jsx)(r.p,{children:"\u540c\u6837\u88ab defer \u7684\u8bed\u53e5\uff0c\u5148\u88ab defer \u7684\u8bed\u53e5\u6700\u540e\u6267\u884c\uff0c\u6700\u540e\u88ab defer \u7684\u8bed\u53e5\u6700\u5148\u6267\u884c\uff0c\u7c7b\u4f3c\u6808\u7684\u6267\u884c\u987a\u5e8f\u3002"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-go",children:"func main() {\r\n  defer fmt.Println(0)\r\n  defer fmt.Println(1)\r\n  fmt.Println(2)\r\n}\n"})}),"\n",(0,t.jsx)(r.p,{children:"defer \u5e38\u7528\u6765\u5904\u7406\u4e1a\u52a1\u903b\u8f91\u4e2d\u6210\u5bf9\u7684\u64cd\u4f5c\uff0c\u6bd4\u5982\u6253\u5f00\u6587\u4ef6\u548c\u5173\u95ed\u6587\u4ef6\uff0c\u63a5\u6536\u8bf7\u6c42\u548c\u56de\u590d\u8bf7\u6c42\uff0c\u52a0\u9501\u548c\u89e3\u9501\u7b49\u7b49\u3002"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-go",children:'func main() {\r\n  f, err := os.OpenFile("./song.txt", os.O_WRONLY|os.O_CREATE, 0666)\r\n  if err != nil {\r\n    fmt.Println("\u6587\u4ef6\u6253\u5f00\u5931\u8d25")\r\n    return\r\n  }\r\n  defer f.Close()\r\n\r\n  str := "\u632a\u5a01\u7684\u68ee\u6797\\n"\r\n\r\n  // \u5199\u5165\u65f6\uff0c\u4f7f\u7528\u5e26\u7f13\u5b58\u7684 *Writer\r\n  writer := bufio.NewWriter(f)\r\n  for i := 0; i < 3; i++ {\r\n    writer.WriteString(str)\r\n  }\r\n\r\n  // \u56e0\u4e3a writer \u662f\u5e26\u7f13\u5b58\u7684\uff0c\u56e0\u6b64\u5728\u8c03\u7528 WriterString \u65b9\u6cd5\u65f6\uff0c\u5185\u5bb9\u662f\u5148\u5199\u5165\u7f13\u5b58\u7684\r\n  // \u6240\u4ee5\u8981\u8c03\u7528 Flush\u65b9\u6cd5\uff0c\u5c06\u7f13\u5b58\u7684\u6570\u636e\u771f\u6b63\u5199\u5165\u5230\u6587\u4ef6\u4e2d\r\n  writer.Flush()\r\n}\n'})})]})}function a(e={}){const{wrapper:r}={...(0,i.a)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},11151:(e,r,n)=>{n.d(r,{Z:()=>c,a:()=>s});var t=n(67294);const i={},o=t.createContext(i);function s(e){const r=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function c(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),t.createElement(o.Provider,{value:r},e.children)}}}]);