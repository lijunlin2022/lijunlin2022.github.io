"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[537],{28458:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>u,frontMatter:()=>c,metadata:()=>s,toc:()=>a});var t=r(85893),o=r(11151);const c={},i="\u5b95\u673a\u6062\u590d",s={id:"go/recover",title:"\u5b95\u673a\u6062\u590d",description:"recover \u53ef\u4ee5\u8ba9\u8fdb\u5165\u5b95\u673a\u72b6\u6001\u7684 goruntine \u6062\u590d\u6267\u884c\u3002",source:"@site/docs/13-go/14-recover.md",sourceDirName:"13-go",slug:"/go/recover",permalink:"/docs/go/recover",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:14,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"\u5b95\u673a",permalink:"/docs/go/panic"},next:{title:"\u9876\u70b9\u7740\u8272\u5668\u548c\u7247\u5143\u7740\u8272\u5668",permalink:"/docs/webgl/vertex-and-fragment"}},l={},a=[];function d(e){const n={code:"code",h1:"h1",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"\u5b95\u673a\u6062\u590d",children:"\u5b95\u673a\u6062\u590d"}),"\n",(0,t.jsx)(n.p,{children:"recover \u53ef\u4ee5\u8ba9\u8fdb\u5165\u5b95\u673a\u72b6\u6001\u7684 goruntine \u6062\u590d\u6267\u884c\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u5b83\u4ec5\u5728 defer \u8bed\u53e5\u4e2d\u6709\u6548\uff0c\u5176\u4ed6\u60c5\u51b5\u4e0b\u8c03\u7528 recover \u8fd4\u56de nil \u5e76\u4e14\u6ca1\u6709\u5176\u4ed6\u5f71\u54cd\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u901a\u5e38\u6765\u8bf4\uff0c\u4e0d\u5e94\u8be5\u5bf9\u8fdb\u5165 panic \u5b95\u673a\u7684\u7a0b\u5e8f\u505a\u4efb\u4f55\u5904\u7406\uff0c\u4f46\u6709\u65f6\uff0c\u9700\u8981\u6211\u4eec\u53ef\u4ee5\u4ece\u5b95\u673a\u4e2d\u6062\u590d\uff0c\u81f3\u5c11\u6211\u4eec\u53ef\u4ee5\u5728\u7a0b\u5e8f\u5d29\u6e83\u524d\uff0c\u505a\u4e00\u4e9b\u64cd\u4f5c\uff0c\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u5f53 web \u670d\u52a1\u5668\u9047\u5230\u4e0d\u53ef\u9884\u6599\u7684\u4e25\u91cd\u95ee\u9898\u65f6\uff0c\u5728\u5d29\u6e83\u524d\u5e94\u8be5\u5c06\u6240\u6709\u7684\u8fde\u63a5\u5173\u95ed\uff0c\u5982\u679c\u4e0d\u505a\u4efb\u4f55\u5904\u7406\uff0c\u4f1a\u4f7f\u5f97\u5ba2\u6237\u7aef\u4e00\u76f4\u5904\u4e8e\u7b49\u5f85\u72b6\u6001\uff0c\u5982\u679c web \u670d\u52a1\u5668\u8fd8\u5728\u5f00\u53d1\u9636\u6bb5\uff0c\u670d\u52a1\u5668\u751a\u81f3\u53ef\u4ee5\u5c06\u5f02\u5e38\u4fe1\u606f\u53cd\u9988\u5230\u5ba2\u6237\u7aef\uff0c\u5e2e\u52a9\u8c03\u8bd5"}),"\n",(0,t.jsx)(n.p,{children:"panic \u548c recover \u7684\u7ec4\u5408\u6709\u5982\u4e0b\u7279\u6027\uff1a"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u6709 panic \u6ca1 recover\uff0c\u7a0b\u5e8f\u5b95\u673a\u3002"}),"\n",(0,t.jsx)(n.li,{children:"\u6709 panic \u4e5f\u6709 recover\uff0c\u7a0b\u5e8f\u4e0d\u4f1a\u5b95\u673a\uff0c\u6267\u884c\u5b8c\u5bf9\u5e94\u7684 defer \u540e\uff0c\u4ece\u5b95\u673a\u70b9\u9000\u51fa\u5f53\u524d\u51fd\u6570\u540e\u7ee7\u7eed\u6267\u884c\u3002"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",children:'func ProtectRun(entry func()) {\r\n  defer func() {\r\n    err := recover()\r\n    fmt.Println("error:", err)\r\n  }()\r\n  entry()\r\n}\r\n\r\nfunc main() {\r\n  fmt.Println("\u8fd0\u884c\u524d")\r\n  // \u6545\u610f\u9020\u6210\u7a7a\u6307\u9488\u8bbf\u95ee\u9519\u8bef\r\n  ProtectRun(func() {\r\n    fmt.Println("\u8d4b\u503c\u5b95\u673a\u524d")\r\n    var a *int\r\n    *a = 1\r\n    fmt.Println("\u8d4b\u503c\u5b95\u673a\u540e")\r\n  })\r\n  fmt.Println("\u8fd0\u884c\u540e")\r\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"\u4e0a\u8ff0\u51fd\u6570\u6253\u5370\u7ed3\u679c\u4e3a\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\u8fd0\u884c\u524d\r\n\u8d4b\u503c\u5b95\u673a\u524d\r\nerror: runtime error: invalid memory address or nil pointer dereference  \r\n\u8fd0\u884c\u540e\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u4e5f\u5c31\u662f\u8bf4\uff0cgo \u51fd\u6570\u5b95\u673a\u540e\uff0c\u9000\u51fa\u4e86 ProtectRun() \u5e76\u7ee7\u7eed\u6267\u884c\u3002"})]})}function u(e={}){const{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},11151:(e,n,r)=>{r.d(n,{Z:()=>s,a:()=>i});var t=r(67294);const o={},c=t.createContext(o);function i(e){const n=t.useContext(c);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),t.createElement(c.Provider,{value:n},e.children)}}}]);