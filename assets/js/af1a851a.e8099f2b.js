"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[966],{34658:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>s,contentTitle:()=>A,default:()=>c,frontMatter:()=>l,metadata:()=>o,toc:()=>a});var r=t(85893),i=t(11151);const l={},A="\u591a\u7f13\u51b2\u533a\u548c\u6570\u636e\u504f\u79fb",o={id:"webgl/multi-buffer",title:"\u591a\u7f13\u51b2\u533a\u548c\u6570\u636e\u504f\u79fb",description:"\u4e0a\u4e00\u8282\u4ecb\u7ecd\u4e86\u5982\u4f55\u5229\u7528\u7f13\u51b2\u533a\u7ed8\u5236\u591a\u4e2a\u70b9\uff0c\u8fd9\u8282\u4ecb\u7ecd\u5982\u4f55\u521b\u5efa\u591a\u7f13\u51b2\u533a\u3002",source:"@site/docs/14-webgl/06-multi-buffer.md",sourceDirName:"14-webgl",slug:"/webgl/multi-buffer",permalink:"/docs/webgl/multi-buffer",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:6,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"\u4f7f\u7528\u7f13\u51b2\u533a\u5bf9\u8c61\u7ed8\u5236\u591a\u4e2a\u70b9",permalink:"/docs/webgl/buffer"},next:{title:"\u5b9e\u73b0\u591a\u79cd\u56fe\u5f62\u7684\u7ed8\u5236",permalink:"/docs/webgl/multi-shape"}},s={},a=[];function g(n){const e={code:"code",h1:"h1",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.a)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.h1,{id:"\u591a\u7f13\u51b2\u533a\u548c\u6570\u636e\u504f\u79fb",children:"\u591a\u7f13\u51b2\u533a\u548c\u6570\u636e\u504f\u79fb"}),"\n",(0,r.jsx)(e.p,{children:"\u4e0a\u4e00\u8282\u4ecb\u7ecd\u4e86\u5982\u4f55\u5229\u7528\u7f13\u51b2\u533a\u7ed8\u5236\u591a\u4e2a\u70b9\uff0c\u8fd9\u8282\u4ecb\u7ecd\u5982\u4f55\u521b\u5efa\u591a\u7f13\u51b2\u533a\u3002"}),"\n",(0,r.jsx)(e.p,{children:"\u6bd4\u5982\u540c\u6837\u8981\u753b\u4e09\u4e2a\u70b9\uff0c\u4e09\u4e2a\u70b9\u7684\u4f4d\u7f6e\u4e0d\u4e00\u6837\uff0c\u5927\u5c0f\u4e5f\u4e0d\u4e00\u6837\uff0c\u6211\u4eec\u53ef\u4ee5\u8fd9\u6837\u5199\uff1a"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{src:t(35568).Z+"",width:"375",height:"375"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-js",children:"...\r\nconst VERTEX_SHADER_SOURCE = `\r\n  attribute vec4 aPosition;\r\n  attribute float aPointSize;\r\n  void main() {\r\n    gl_Position = aPosition;\r\n    gl_PointSize = aPointSize;\r\n  }\r\n`\r\n...\r\nconst program = initShader(gl, VERTEX_SHADER_SOURCE, FRAGMENT_SHADER_SOURCE)\r\nconst aPosition = gl.getAttribLocation(program, 'aPosition')\r\nconst aPointSize = gl.getAttribLocation(program, 'aPointSize')\r\n\r\n// highlight-start\r\nconst points = new Float32Array([\r\n  -0.5, -0.5,\r\n  0.5, -0.5,\r\n  0.0, 0.5\r\n])\r\n\r\nconst buffer = gl.createBuffer()\r\ngl.bindBuffer(gl.ARRAY_BUFFER, buffer)\r\ngl.bufferData(gl.ARRAY_BUFFER, points, gl.STATIC_DRAW)\r\ngl.vertexAttribPointer(aPosition, 2, gl.FLOAT, false, 0, 0)\r\ngl.enableVertexAttribArray(aPosition)\r\n// highlight-end\r\n\r\n// highlight-start\r\nconst size = new Float32Array([\r\n  10.0,\r\n  20.0,\r\n  30.0\r\n])\r\n\r\nconst sizeBuffer = gl.createBuffer()\r\ngl.bindBuffer(gl.ARRAY_BUFFER, sizeBuffer)\r\ngl.bufferData(gl.ARRAY_BUFFER, size, gl.STATIC_DRAW)\r\ngl.vertexAttribPointer(aPointSize, 1, gl.FLOAT, false, 0, 0)\r\ngl.enableVertexAttribArray(aPointSize)\r\n// highlight-end\r\n\r\ngl.drawArrays(gl.POINTS, 0, 3)\n"})}),"\n",(0,r.jsx)(e.p,{children:"\u4e0d\u96be\u770b\u51fa\uff0c\u4e24\u6bb5\u4ee3\u7801\u7684\u76f8\u4f3c\u7a0b\u5ea6\u5f88\u9ad8\uff0c\u6709\u4ec0\u4e48\u529e\u6cd5\u53ef\u4ee5\u964d\u4f4e\u4ee3\u7801\u91cd\u590d\u5ea6\u5417\uff1f"}),"\n",(0,r.jsx)(e.p,{children:"\u8fd9\u65f6\u5019\u5c31\u9700\u8981\u7528\u5230\u4ee3\u7801\u504f\u79fb\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-js",children:"...\r\nconst points = new Float32Array([\r\n  -0.5, -0.5, 10.0,\r\n  0.5, -0.5, 20.0,\r\n  0.0, 0.5, 30.0\r\n])\r\n\r\nconst buffer = gl.createBuffer()\r\ngl.bindBuffer(gl.ARRAY_BUFFER, buffer)\r\ngl.bufferData(gl.ARRAY_BUFFER, points, gl.STATIC_DRAW)\r\n\r\nconst BYTES = points.BYTES_PER_ELEMENT\r\n// highlight-next-line\r\ngl.vertexAttribPointer(aPosition, 2, gl.FLOAT, false, BYTES * 3, 0)\r\ngl.enableVertexAttribArray(aPosition)\r\n// highlight-next-line\r\ngl.vertexAttribPointer(aPointSize, 1, gl.FLOAT, false, BYTES * 3, BYTES * 2)\r\ngl.enableVertexAttribArray(aPointSize)\r\n\r\ngl.drawArrays(gl.POINTS, 0, 3)\n"})}),"\n",(0,r.jsxs)(e.p,{children:["\u6211\u4eec\u53ef\u4ee5\u590d\u4e60\u4e00\u4e0b ",(0,r.jsx)(e.code,{children:"vertexAttribPointer"})," \u7684\u4f7f\u7528\u65b9\u6cd5\uff1a"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-js",children:"gl.vertexAttribPointer(location, size, type, normalized, stride, offset)\n"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"location\uff0cattribute \u53d8\u91cf\u7684\u5b58\u50a8\u5730\u5740"}),"\n",(0,r.jsx)(e.li,{children:"size\uff0c\u6ca1\u7ed8\u5236\u4e00\u4e2a\u9876\u70b9\u9700\u8981\u51e0\u4e2a\u6570\u636e"}),"\n",(0,r.jsxs)(e.li,{children:["type\uff0c\u6307\u5b9a\u6570\u636e\u683c\u5f0f","\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"gl.FLOAT\uff0c\u6d6e\u70b9\u578b"}),"\n",(0,r.jsx)(e.li,{children:"gl.UNSIGNED_BYTE\uff0c\u65e0\u7b26\u53f7\u5b57\u8282"}),"\n",(0,r.jsx)(e.li,{children:"gl.SHORT\uff0c\u77ed\u6574\u578b"}),"\n",(0,r.jsx)(e.li,{children:"gl.UNSIGNED_SHORT\uff0c\u65e0\u7b26\u53f7\u77ed\u6574\u578b"}),"\n",(0,r.jsx)(e.li,{children:"gl.INT\uff0c\u6574\u578b"}),"\n",(0,r.jsx)(e.li,{children:"gl.UNSIGNED_INT\uff0c\u65e0\u7b26\u53f7\u6574\u578b"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.li,{children:"normalized\uff0c\u8868\u793a\u662f\u5426\u5c06\u6570\u636e\u5f52\u4e00\u5316\u5230 [0, 1] [-1, 1] \u8fd9\u4e2a\u533a\u95f4"}),"\n",(0,r.jsx)(e.li,{children:"stride\uff0c\u4e24\u4e2a\u76f8\u90bb\u9876\u70b9\u4e4b\u95f4\u7684\u5b57\u8282\u6570"}),"\n",(0,r.jsx)(e.li,{children:"offset\uff0c\u6570\u636e\u504f\u79fb\u91cf"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{src:t(44063).Z+"",width:"356",height:"310"})})]})}function c(n={}){const{wrapper:e}={...(0,i.a)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(g,{...n})}):g(n)}},44063:(n,e,t)=>{t.d(e,{Z:()=>r});const r=t.p+"assets/images/multi-buffer-principle-c0fb28026693d66ad8ab45557d6ad2e3.png"},35568:(n,e,t)=>{t.d(e,{Z:()=>r});const r="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAXcAAAF3CAIAAADRopypAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAEXRFWHRTb2Z0d2FyZQBTbmlwYXN0ZV0Xzt0AAAabSURBVHic7d2xbltlAIbhHNu1KxAqAxILKlKHXkBnLqQr3bgABgbfDlI3hHwHSF09MFRi6dI5DEgxtmMfNoZCUWj64rg8z+pzom+I3pzfieJhs9mM43g8Hvf7/W63G4ZhGIbpdHoBN7Ber5fL5Wq1OvUQ7oTD4TCO4ziO8/n83r17k8lkGIbZOI7X19fb7fZwOMzn81OPBM7Ynw8o2+12v9/fv39/NptNrq+vN5vNZDKRGOB9mc/ns9lss9kcDofJfr8/Ho/DMJx6FfChOR6Pu91ust/vF4vFqccAH6DFYrHf7yeeYoCUygChYRgmfmkNdKbTqWcZIDSZTCan3gB84FQGaKkM0FIZoKUyQEtlgJbKAC2VAVoqA7RUBmipDNBSGaClMkBLZYCWygAtlQFaKgO0VAZoqQzQUhmgpTJAS2WAlsoALZUBWioDtFQGaKkM0FIZoKUyQEtlgJbKAC2VAVoqA7RUBmipDNBSGaClMkBLZYCWygAtlQFaKgO0VAZoqQzQUhmgpTJAS2WAlsoALZUBWioDtFQGaKkM0FIZoKUyQEtlgJbKAC2VAVoqA7RUBmipDNBSGaClMkBLZYCWygAtlQFaKgO0VAZoqQzQUhmgpTJAS2WAlsoALZUBWrNTD+BO2m6Hw+FGV/7++8XhMFxd3eTacbG4mE5vNYwzpDL8jY+/+Wb+ww83ufKTi4vZxcWnX3xxk4t/+/HH66++ut00zo8TE9BSGaClMkBLZYCWygAtlQFaKgO0VAZoqQzQUhmgpTJAS2WAlsoALZUBWioDtFQGaKkM0FIZoKUyQEtlgJbKAC2VAVoqA7RUBmipDNBSGaClMkDL52TzN8bPPjs+fHijK3e78ddfj59/fqOvu1jcahbnabi8vDz1Bs7Yer1eLper1erUQ7i7nJiAlsoALZUBWioDtFQGaKkM0FIZoKUyQEtlgJbKAC2VAVoqA7RUBmipDNBSGaClMkBLZYCWygAtlQFaKgO0VAZoqQzQUhmgpTJAS2WAlsoALZUBWioDtFQGaKkM0FIZoKUyQEtlgJbKAC2VAVoqA7RUBmipDNBSGaClMkBLZYCWygAtlQFaKgO0VAZoqQzQUhmgpTJAS2WAlsoALZUBWioDtFQGaKkM0FIZoKUyQEtlgJbKAC2VAVoqA7RUBmipDNBSGaClMkBLZYCWygAtlQFaKgO0VAZoqQzQUhmgpTJAS2WAlsoALZUBWioDtFQGaKkM0FIZoDV7+fLlqTdwxl69enV1deW7iH8wPHny5NQbOGNXV1evX79+/PjxqYdwdw2Xl5en3sAZW6/Xy+VytVqdegh3l/dlgJbKAC2VAVoqA7RUBmipDNBSGaClMkBLZYCWygAtlQFaKgO0VAZoqQzQUhmgpTJAS2WAlsoALZUBWioDtFQGaKkM0FIZoKUyQEtlgJbKAC2VAVoqA7RUBmipDNBSGaClMkBLZYCWygAtlQFaKgO0VAZoqQzQUhmgpTJAS2WAlsoALZUBWioDtFQGaKkM0FIZoKUyQEtlgJbKAC2VAVoqA7RUBmipDNBSGaClMkBLZYCWygAtlQFaKgO0VAZoqQzQUhmgpTJAS2WAlsoALZUBWioDtFQGaKkM0FIZoKUyQEtlgJbKAC2VAVoqA7RUBmipDNBSGaClMkBLZYCWygAtlQFaKgO0VAZozU49AM7e9OefZy9evMON44MHu6dP3/ueu0Zl4LZmL1589N1373Dj8dGj/0NlnJiAlsoALZUBWt6XedPsp58Wz5+/7dXNt98ev/zyv9wD505l3jT95Zf599+/7dXts2cqA/+KExPQUhmgpTJAS2WAlsoALZUBWioDtFQGaPmrvDdtnz3bfv31W1+e6DL8OyrzF8NwMQynHgEfDj+ZgZbKAC0nJrit8cGD46NH73Dj4eHD9z7mDlIZuK3d06f/h3+s+c6cmICWygAtlQFaKgO0VAZoqQzQUhmgpTJAS2WAlsoALZUBWioDtFQGaKkM0FIZoKUyQEtlgJbKAC2VAVoqA7RUBmipDNBSGaClMkBLZYCWygAtlQFaKgO0VAZoqQzQUhmgpTJAS2WAlsoALZUBWioDtFQGaKkM0FIZoKUyQEtlgJbKAC2VAVoqA7RUBmipDNBSGaClMkBLZYCWygAtlQFaKgO0VAZoqQzQUhmgpTJAS2WAlsoALZUBWioDtFQGaKkM0FIZoKUyQEtlgJbKAC2VAVoqA7RUBmipDNBSGaClMkBLZYCWygAtlQFafwDZA7AL5eeixgAAAABJRU5ErkJggg=="},11151:(n,e,t)=>{t.d(e,{Z:()=>o,a:()=>A});var r=t(67294);const i={},l=r.createContext(i);function A(n){const e=r.useContext(l);return r.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:A(n.components),r.createElement(l.Provider,{value:e},n.children)}}}]);