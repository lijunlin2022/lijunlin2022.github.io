"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[9019],{89389:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>h,contentTitle:()=>r,default:()=>o,frontMatter:()=>c,metadata:()=>l,toc:()=>a});var s=i(85893),d=i(11151);const c={},r="\u4ece\u62fc\u591a\u591a\u5206\u4eab\u5546\u54c1\u8bf4\u8d77\uff0ccanvas \u7ed8\u56fe\u5982\u4f55\u5b9e\u73b0 contain \u548c cover \u6548\u679c\uff1f",l={permalink:"/blog/2024/07/11/canvas-image",source:"@site/blog/2024-07-11-canvas-image/index.md",title:"\u4ece\u62fc\u591a\u591a\u5206\u4eab\u5546\u54c1\u8bf4\u8d77\uff0ccanvas \u7ed8\u56fe\u5982\u4f55\u5b9e\u73b0 contain \u548c cover \u6548\u679c\uff1f",description:"\u6211\u4eec\u5076\u5c14\u4f1a\u5728\u4e00\u4e9b H5\u3001\u5c0f\u7a0b\u5e8f\u4e2d\uff0c\u770b\u5230\u5206\u4eab\u5546\u54c1\u7684\u529f\u80fd\u3002\u6bd4\u5982\u62fc\u591a\u591a\u5c0f\u7a0b\u5e8f\u4e2d\uff0c\u7528\u6237\u53ef\u4ee5\u628a\u5546\u54c1\u5206\u4eab\u7ed9\u81ea\u5df1\u7684\u597d\u53cb\u3002\u5206\u4eab\u56fe\u4e3b\u8981\u7531 2 \u5f20\u56fe\u7247\u7ec4\u6210\uff0c\u4e00\u5f20\u5546\u54c1\u56fe\uff0c\u4e00\u5f20\u80cc\u666f\u56fe\u3002",date:"2024-07-11T00:00:00.000Z",tags:[],readingTime:8.75,hasTruncateMarker:!1,authors:[],frontMatter:{},unlisted:!1,nextItem:{title:"\u4eff\u4eca\u65e5\u5934\u6761\uff0cH5 \u5faa\u73af\u64ad\u653e\u7684\u901a\u77e5\u680f\u5982\u4f55\u5b9e\u73b0\uff1f",permalink:"/blog/2024/05/26/loop-notice"}},h={authorsImageUrls:[]},a=[{value:"contain \u6548\u679c",id:"contain-\u6548\u679c",level:2},{value:"\u56fe\u7247\u5bbd\u9ad8\u6bd4 &lt; \u5bb9\u5668\u5bbd\u9ad8\u6bd4",id:"\u56fe\u7247\u5bbd\u9ad8\u6bd4--\u5bb9\u5668\u5bbd\u9ad8\u6bd4",level:3},{value:"\u56fe\u7247\u5bbd\u9ad8\u6bd4 &gt; \u5bb9\u5668\u5bbd\u9ad8\u6bd4",id:"\u56fe\u7247\u5bbd\u9ad8\u6bd4--\u5bb9\u5668\u5bbd\u9ad8\u6bd4-1",level:3},{value:"drawContainImage \u4ee3\u7801",id:"drawcontainimage-\u4ee3\u7801",level:3},{value:"cover \u6548\u679c",id:"cover-\u6548\u679c",level:2},{value:"\u56fe\u7247\u5bbd\u9ad8\u6bd4 &gt; \u5bb9\u5668\u5bbd\u9ad8\u6bd4",id:"\u56fe\u7247\u5bbd\u9ad8\u6bd4--\u5bb9\u5668\u5bbd\u9ad8\u6bd4-2",level:3},{value:"\u56fe\u7247\u5bbd\u9ad8\u6bd4 &lt; \u5bb9\u5668\u5bbd\u9ad8\u6bd4",id:"\u56fe\u7247\u5bbd\u9ad8\u6bd4--\u5bb9\u5668\u5bbd\u9ad8\u6bd4-3",level:3},{value:"drawCoverImage \u4ee3\u7801",id:"drawcoverimage-\u4ee3\u7801",level:3},{value:"\u5b8c\u6574\u4ee3\u7801",id:"\u5b8c\u6574\u4ee3\u7801",level:2},{value:"\u603b\u7ed3",id:"\u603b\u7ed3",level:2},{value:"\u53c2\u8003\u6587\u7ae0",id:"\u53c2\u8003\u6587\u7ae0",level:2}];function t(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,d.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"\u6211\u4eec\u5076\u5c14\u4f1a\u5728\u4e00\u4e9b H5\u3001\u5c0f\u7a0b\u5e8f\u4e2d\uff0c\u770b\u5230\u5206\u4eab\u5546\u54c1\u7684\u529f\u80fd\u3002\u6bd4\u5982\u62fc\u591a\u591a\u5c0f\u7a0b\u5e8f\u4e2d\uff0c\u7528\u6237\u53ef\u4ee5\u628a\u5546\u54c1\u5206\u4eab\u7ed9\u81ea\u5df1\u7684\u597d\u53cb\u3002\u5206\u4eab\u56fe\u4e3b\u8981\u7531 2 \u5f20\u56fe\u7247\u7ec4\u6210\uff0c\u4e00\u5f20\u5546\u54c1\u56fe\uff0c\u4e00\u5f20\u80cc\u666f\u56fe\u3002"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:i(99062).Z+"",width:"400",height:"335"})}),"\n",(0,s.jsx)(n.p,{children:"\u5546\u54c1\u56fe\u901a\u5e38\u7531\u5546\u5bb6\u81ea\u5df1\u914d\u7f6e\uff0c\u5c3a\u5bf8\u4f1a\u53d8\u52a8\uff0c\u4e00\u822c\u662f contain \u6548\u679c\uff1b\u80cc\u666f\u56fe\u901a\u5e38\u7531 UI \u63d0\u4f9b\uff0c\u5c3a\u5bf8\u56fa\u5b9a\uff0c\u4e00\u822c\u662f cover \u6548\u679c\u3002"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:i(74992).Z+"",width:"765",height:"357"})}),"\n",(0,s.jsxs)(n.p,{children:["\u5982\u679c\u4f7f\u7528 css\uff0c\u6211\u4eec\u53ef\u4ee5\u7ed9 ",(0,s.jsx)(n.code,{children:"background-size"})," \u8bbe\u7f6e ",(0,s.jsx)(n.code,{children:"contain"})," \u548c ",(0,s.jsx)(n.code,{children:"cover"}),"\uff0c\u53ef\u60dc\u8fd9\u7c7b\u5206\u4eab\u56fe\u57fa\u672c\u7531 canvas \u7ed8\u5236\u800c\u6210\u3002canvas \u53ea\u63d0\u4f9b\u4e86 ",(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/drawImage",children:"drawImage()"})," \u7ed8\u5236\u56fe\u7247\uff0c\u65e0\u6cd5\u7cbe\u51c6\u5b9e\u73b0 ",(0,s.jsx)(n.code,{children:"contain"})," \u548c ",(0,s.jsx)(n.code,{children:"cover"})," \u6548\u679c\uff0c\u4e8e\u662f\u6211\u5b9e\u73b0\u4e86 ",(0,s.jsx)(n.code,{children:"drawContainImage"})," \u548c ",(0,s.jsx)(n.code,{children:"drawCoverImage"})," \u4e24\u4e2a\u5de5\u5177\u51fd\u6570\u3002"]}),"\n",(0,s.jsxs)(n.p,{children:["\u672c\u6587\u6211\u4f1a\u5148\u5206\u6790 contain \u6548\u679c\u7684",(0,s.jsx)(n.code,{children:"\u56fe\u7247\u5bbd\u9ad8\u6bd4"}),"\u548c",(0,s.jsx)(n.code,{children:"\u5bb9\u5668\u5bbd\u9ad8\u6bd4"}),"\uff0c\u5e76\u7ed9\u51fa drawContainImage \u5de5\u5177\u51fd\u6570\uff1b\u518d\u5206\u6790 cover \u6548\u679c\u7684",(0,s.jsx)(n.code,{children:"\u56fe\u7247\u5bbd\u9ad8\u6bd4"}),"\u548c",(0,s.jsx)(n.code,{children:"\u5bb9\u5668\u5bbd\u9ad8\u6bd4"}),"\uff0c\u5e76\u7ed9\u51fa drawCoverImage \u5de5\u5177\u51fd\u6570\uff1b\u6700\u540e\u6211\u4f1a\u7528\u4e24\u4e2a\u5de5\u5177\u51fd\u6570\uff0c\u7ed8\u5236\u5982\u4e0b\u5206\u4eab\u56fe\uff1a"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:i(58094).Z+"",width:"400",height:"275"})}),"\n",(0,s.jsx)(n.p,{children:"\u62f3\u6253 H5\uff0c\u811a\u8e22\u5c0f\u7a0b\u5e8f\u3002\u6211\u662f\u300c\u5c0f\u9716\u5bb6\u7684\u6df7\u6c5f\u9f99\u300d\uff0c\u5173\u6ce8\u6211\uff0c\u5e26\u4f60\u4e86\u89e3\u66f4\u591a\u5b9e\u7528\u7684 H5\u3001\u5c0f\u7a0b\u5e8f\u6b66\u5b66\u3002"}),"\n",(0,s.jsx)(n.h2,{id:"contain-\u6548\u679c",children:"contain \u6548\u679c"}),"\n",(0,s.jsxs)(n.p,{children:["\u5148\u6765\u770b contain \u6548\u679c\u3002contain \u6548\u679c\u662f\u300c\u7f29\u653e\u56fe\u7247\u4ee5",(0,s.jsx)(n.strong,{children:"\u5b8c\u5168\u88c5\u5165"}),"\u5bb9\u5668\u300d\uff0c\u5b83\u4f1a\u6709\u4e24\u79cd\u60c5\u51b5\uff1a"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u56fe\u7247\u5bbd\u9ad8\u6bd4 < \u5bb9\u5668\u5bbd\u9ad8\u6bd4\uff0c\u7f29\u653e\u540e\u56fe\u7247\u5bbd\u5ea6 < \u5bb9\u5668\u5bbd\u5ea6\uff0c\u56fe\u7247\u9ad8\u5ea6 = \u5bb9\u5668\u9ad8\u5ea6\u3002"}),"\n",(0,s.jsx)(n.li,{children:"\u56fe\u7247\u5bbd\u9ad8\u6bd4 > \u5bb9\u5668\u5bbd\u9ad8\u6bd4\uff0c\u7f29\u653e\u540e\u56fe\u7247\u5bbd\u5ea6 = \u5bb9\u5668\u5bbd\u5ea6\uff0c\u56fe\u7247\u9ad8\u5ea6 < \u5bb9\u5668\u9ad8\u5ea6\u3002"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:i(57428).Z+"",width:"1179",height:"572"})}),"\n",(0,s.jsxs)(n.p,{children:["\u4e0d\u96be\u770b\u51fa\uff0ccontain \u6548\u679c\u4e0b\uff0c\u56fe\u7247\u603b\u662f\u5b8c\u6574\u5c55\u793a\u7684\uff0c\u56e0\u6b64\u6211\u4eec\u4e0d\u5fc5\u8003\u8651\u88c1\u526a\u56fe\u7247\u3002",(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/drawImage",children:"drawImage"})," \u7684 9 \u4e2a\u53c2\u6570\u4e2d\uff0c\u6211\u4eec\u53ea\u9700\u8981\u8003\u8651 5 \u4e2a\u53c2\u6570\uff1a"]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"image"}),"\uff0c\u753b\u5e03\u56fe\u50cf\u6e90\u3002"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"dx"}),"\uff0cimage \u7684\u5de6\u4e0a\u89d2\u5728\u76ee\u6807\u753b\u5e03\u4e0a X \u8f74\u5750\u6807\u3002"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"dy"}),"\uff0cimage \u7684\u5de6\u4e0a\u89d2\u5728\u76ee\u6807\u753b\u5e03\u4e0a Y \u8f74\u5750\u6807\u3002"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"dw"}),"\uff0cimage \u5728\u76ee\u6807\u753b\u5e03\u4e0a\u7ed8\u5236\u7684\u5bbd\u5ea6\u3002"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"dh"}),"\uff0cimage \u5728\u76ee\u6807\u753b\u5e03\u4e0a\u7ed8\u5236\u7684\u9ad8\u5ea6\u3002"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u56fe\u7247\u5bbd\u9ad8\u6bd4--\u5bb9\u5668\u5bbd\u9ad8\u6bd4",children:"\u56fe\u7247\u5bbd\u9ad8\u6bd4 < \u5bb9\u5668\u5bbd\u9ad8\u6bd4"}),"\n",(0,s.jsx)(n.p,{children:"\u56fe\u7247\u5bbd\u9ad8\u6bd4 < \u5bb9\u5668\u5bbd\u9ad8\u6bd4\u65f6\uff0cdy\uff0cdw \u548c dh \u53ef\u4ee5\u76f4\u89c2\u770b\u51fa\u6765\uff0c\u800c dx \u8fd8\u9700\u8981\u5355\u72ec\u8ba1\u7b97\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:i(15902).Z+"",width:"637",height:"445"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["dx \u662f image \u7684\u5de6\u4e0a\u89d2\u5728\u76ee\u6807\u753b\u5e03\u4e0a X \u8f74\u5750\u6807\uff0c",(0,s.jsx)(n.code,{children:"dx = (width - dw) / 2"}),"\uff1b"]}),"\n",(0,s.jsxs)(n.li,{children:["dy \u662f image \u7684\u5de6\u4e0a\u89d2\u5728\u76ee\u6807\u753b\u5e03\u4e0a Y \u8f74\u5750\u6807\uff0c",(0,s.jsx)(n.code,{children:"dy = 0"}),"\uff1b"]}),"\n",(0,s.jsxs)(n.li,{children:["dw \u662f image \u5728\u76ee\u6807\u753b\u5e03\u4e0a\u7ed8\u5236\u7684\u5bbd\u5ea6\uff0c",(0,s.jsx)(n.code,{children:"dw = imgRatio * width"}),"\uff1b"]}),"\n",(0,s.jsxs)(n.li,{children:["dh \u662f image \u5728\u76ee\u6807\u753b\u5e03\u4e0a\u7ed8\u5236\u7684\u9ad8\u5ea6\uff0c",(0,s.jsx)(n.code,{children:"dh = height"}),"\u3002"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u56fe\u7247\u5bbd\u9ad8\u6bd4--\u5bb9\u5668\u5bbd\u9ad8\u6bd4-1",children:"\u56fe\u7247\u5bbd\u9ad8\u6bd4 > \u5bb9\u5668\u5bbd\u9ad8\u6bd4"}),"\n",(0,s.jsx)(n.p,{children:"\u56fe\u7247\u5bbd\u9ad8\u6bd4 > \u5bb9\u5668\u5bbd\u9ad8\u6bd4\u65f6\uff0cdx\uff0cdw \u548c dh \u53ef\u4ee5\u76f4\u89c2\u770b\u51fa\u6765\uff0c\u800c dy \u8fd8\u9700\u8981\u5355\u72ec\u8ba1\u7b97\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:i(75616).Z+"",width:"669",height:"323"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["dx \u662f image \u7684\u5de6\u4e0a\u89d2\u5728\u76ee\u6807\u753b\u5e03\u4e0a X \u8f74\u5750\u6807\uff0c",(0,s.jsx)(n.code,{children:"dx = 0"}),"\uff1b"]}),"\n",(0,s.jsxs)(n.li,{children:["dy \u662f image \u7684\u5de6\u4e0a\u89d2\u5728\u76ee\u6807\u753b\u5e03\u4e0a Y \u8f74\u5750\u6807\uff0c",(0,s.jsx)(n.code,{children:"dy = (height - dh) / 2"}),"\uff1b"]}),"\n",(0,s.jsxs)(n.li,{children:["dw \u662f image \u5728\u76ee\u6807\u753b\u5e03\u4e0a\u7ed8\u5236\u7684\u5bbd\u5ea6\uff0c",(0,s.jsx)(n.code,{children:"dw = width"}),"\uff1b"]}),"\n",(0,s.jsxs)(n.li,{children:["dh \u662f image \u5728\u76ee\u6807\u753b\u5e03\u4e0a\u7ed8\u5236\u7684\u9ad8\u5ea6\uff0c",(0,s.jsx)(n.code,{children:"dh = dw / imgRatio"}),"\u3002"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"drawcontainimage-\u4ee3\u7801",children:"drawContainImage \u4ee3\u7801"}),"\n",(0,s.jsx)(n.p,{children:"\u4e0b\u9762\u662f drawContainImage \u7684\u4ee3\u7801\uff0c\u56e0\u4e3a contain \u6548\u679c\u4e00\u822c\u4f1a\u7559\u6709\u7a7a\u767d\uff0c\u6240\u4ee5\u6211\u589e\u52a0\u4e86\u4e00\u4e2a fillStyle \u53c2\u6570\uff0c\u7528\u6765\u8bbe\u7f6e\u7a7a\u767d\u90e8\u5206\u7684\u989c\u8272\u3002"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"function drawContainImage({\r\n  ctx, img, x, y, width, height, fillStyle\r\n}) {\r\n  if (fillStyle) {\r\n    ctx.fillStyle = fillStyle\r\n    ctx.fillRect(x, y, width, height)\r\n  }\r\n  const boxRatio = width / height\r\n  const imgRatio = img.width / img.height\r\n\r\n  let dx = 0, dy = 0, dw = 0, dh = 0\r\n  if (imgRatio <= boxRatio) {\r\n    dw = imgRatio * width\r\n    dh = height\r\n    dx = (width - dw) / 2\r\n    dy = 0\r\n  } else {\r\n    dw = width\r\n    dh = dw / imgRatio\r\n    dx = 0\r\n    dy = (height - dh) / 2\r\n  }\r\n  ctx.drawImage(img, x + dx, y + dy, dw, dh)\r\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"cover-\u6548\u679c",children:"cover \u6548\u679c"}),"\n",(0,s.jsxs)(n.p,{children:["\u518d\u770b cover \u6548\u679c\uff0ccover \u6548\u679c\u662f\u300c\u7f29\u653e\u56fe\u7247\u4ee5",(0,s.jsx)(n.strong,{children:"\u5b8c\u5168\u8986\u76d6"}),"\u5bb9\u5668\u300d\u3002\u5982\u4e0b\u793a\u610f\u56fe\u6240\u793a\uff0c\u7f29\u653e\u540e\u56fe\u7247\uff08\u7ea2\u8272\u90e8\u5206\uff09\u6bd4\u5bb9\u5668\uff08\u7eff\u8272\u90e8\u5206\uff09\u5927\u3002\u5b83\u4f1a\u6709\u4e24\u79cd\u60c5\u51b5\uff1a"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u56fe\u7247\u5bbd\u9ad8\u6bd4 > \u5bb9\u5668\u5bbd\u9ad8\u6bd4\uff0c\u7f29\u653e\u540e\u56fe\u7247\u5bbd\u5ea6 = \u5bb9\u5668\u5bbd\u5ea6\uff0c\u56fe\u7247\u9ad8\u5ea6 > \u5bb9\u5668\u9ad8\u5ea6\u3002"}),"\n",(0,s.jsx)(n.li,{children:"\u56fe\u7247\u5bbd\u9ad8\u6bd4 < \u5bb9\u5668\u5bbd\u9ad8\u6bd4\uff0c\u7f29\u653e\u540e\u56fe\u7247\u5bbd\u5ea6 < \u5bb9\u5668\u5bbd\u5ea6\uff0c\u56fe\u7247\u9ad8\u5ea6 = \u5bb9\u5668\u9ad8\u5ea6\u3002"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:i(6211).Z+"",width:"957",height:"531"})}),"\n",(0,s.jsxs)(n.p,{children:["\u4e0d\u96be\u770b\u51fa\uff0ccontain \u6548\u679c\u4e0b\uff0c\u56fe\u7247\u603b\u662f\u9700\u8981\u88c1\u526a\u56fe\u7247\uff0c\u6240\u4ee5 ",(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/drawImage",children:"drawImage"})," \u7684 9 \u4e2a\u53c2\u6570\u6211\u4eec\u90fd\u9700\u8981\u4f7f\u7528\uff1a"]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"image"}),"\uff0c\u753b\u5e03\u56fe\u50cf\u6e90\u3002"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"sx"}),"\uff0cimage \u7684\u77e9\u5f62\uff08\u88c1\u526a\uff09\u9009\u62e9\u6846\u7684\u5de6\u4e0a\u89d2 X \u8f74\u5750\u6807\u3002"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"sy"}),"\uff0cimage \u7684\u77e9\u5f62\uff08\u88c1\u526a\uff09\u9009\u62e9\u6846\u7684\u5de6\u4e0a\u89d2 Y \u8f74\u5750\u6807\u3002"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"sw"}),"\uff0cimage \u7684\u77e9\u5f62\uff08\u88c1\u526a\uff09\u9009\u62e9\u6846\u7684\u5bbd\u5ea6\u3002"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"sh"}),"\uff0cimage\u7684\u77e9\u5f62\uff08\u88c1\u526a\uff09\u9009\u62e9\u6846\u7684\u9ad8\u5ea6\u3002"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"dx"}),"\uff0cimage \u7684\u5de6\u4e0a\u89d2\u5728\u76ee\u6807\u753b\u5e03\u4e0a X \u8f74\u5750\u6807\u3002"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"dy"}),"\uff0cimage \u7684\u5de6\u4e0a\u89d2\u5728\u76ee\u6807\u753b\u5e03\u4e0a Y \u8f74\u5750\u6807\u3002"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"dw"}),"\uff0cimage \u5728\u76ee\u6807\u753b\u5e03\u4e0a\u7ed8\u5236\u7684\u5bbd\u5ea6\u3002"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"dh"}),"\uff0cimage \u5728\u76ee\u6807\u753b\u5e03\u4e0a\u7ed8\u5236\u7684\u9ad8\u5ea6\u3002"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"\u5e78\u8fd0\u7684\u662f\uff0ccontain \u6548\u679c\u4e0b\uff0cdx, dy, dw \u548c dh \u7684\u53d6\u503c\u90fd\u662f\u56fa\u5b9a\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u7740\u91cd\u8003\u8651\u7684\u53ea\u6709 sx, sy, sw \u548c sh \u8fd9 4 \u4e2a\u53c2\u6570\u3002"}),"\n",(0,s.jsx)(n.h3,{id:"\u56fe\u7247\u5bbd\u9ad8\u6bd4--\u5bb9\u5668\u5bbd\u9ad8\u6bd4-2",children:"\u56fe\u7247\u5bbd\u9ad8\u6bd4 > \u5bb9\u5668\u5bbd\u9ad8\u6bd4"}),"\n",(0,s.jsx)(n.p,{children:"\u56fe\u7247\u5bbd\u9ad8\u6bd4 > \u5bb9\u5668\u5bbd\u9ad8\u6bd4\u65f6\uff0csy\uff0csw \u548c sh \u53ef\u4ee5\u76f4\u89c2\u770b\u51fa\u6765\uff0c\u800c sx \u8fd8\u9700\u8981\u5355\u72ec\u8ba1\u7b97\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:i(9746).Z+"",width:"647",height:"316"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["sx \u662f image \u88c1\u526a\u9009\u62e9\u6846\uff08\u7eff\u8272\u90e8\u5206\uff09\u7684\u5de6\u4e0a\u89d2 X \u8f74\u5750\u6807\uff0c",(0,s.jsx)(n.code,{children:"sx = (img.width - sw) / 2"}),"\uff1b"]}),"\n",(0,s.jsxs)(n.li,{children:["sy \u662f image \u88c1\u526a\u9009\u62e9\u6846\uff08\u7eff\u8272\u90e8\u5206\uff09\u7684\u5de6\u4e0a\u89d2 Y \u8f74\u5750\u6807\uff0c",(0,s.jsx)(n.code,{children:"sy = 0"}),"\uff1b"]}),"\n",(0,s.jsxs)(n.li,{children:["sw \u662f image \u88c1\u526a\u9009\u62e9\u6846\uff08\u7eff\u8272\u90e8\u5206\uff09\u7684\u5bbd\u5ea6\uff0c",(0,s.jsx)(n.code,{children:"sw = sh * boxRatio"}),"\uff1b"]}),"\n",(0,s.jsxs)(n.li,{children:["sh \u662f image \u88c1\u526a\u9009\u62e9\u6846\uff08\u7eff\u8272\u90e8\u5206\uff09\u7684\u9ad8\u5ea6\uff0c",(0,s.jsx)(n.code,{children:"sh = img.height"}),"\u3002"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u56fe\u7247\u5bbd\u9ad8\u6bd4--\u5bb9\u5668\u5bbd\u9ad8\u6bd4-3",children:"\u56fe\u7247\u5bbd\u9ad8\u6bd4 < \u5bb9\u5668\u5bbd\u9ad8\u6bd4"}),"\n",(0,s.jsx)(n.p,{children:"\u56fe\u7247\u5bbd\u9ad8\u6bd4 < \u5bb9\u5668\u5bbd\u9ad8\u6bd4\u65f6\uff0csx, sw \u548c sh \u53ef\u4ee5\u76f4\u89c2\u770b\u51fa\u6765\uff0c\u800c sy \u8fd8\u9700\u8981\u5355\u72ec\u8ba1\u7b97\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:i(17650).Z+"",width:"467",height:"316"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["sx \u662f image \u88c1\u526a\u9009\u62e9\u6846\uff08\u7eff\u8272\u90e8\u5206\uff09\u7684\u5de6\u4e0a\u89d2 X \u8f74\u5750\u6807\uff0c",(0,s.jsx)(n.code,{children:"sx = 0"}),"\uff1b"]}),"\n",(0,s.jsxs)(n.li,{children:["sy \u662f image \u88c1\u526a\u9009\u62e9\u6846\uff08\u7eff\u8272\u90e8\u5206\uff09\u7684\u5de6\u4e0a\u89d2 Y \u8f74\u5750\u6807\uff0c",(0,s.jsx)(n.code,{children:"sy = (img.height - sh) / 2"}),"\uff1b"]}),"\n",(0,s.jsxs)(n.li,{children:["sw \u662f image \u88c1\u526a\u9009\u62e9\u6846\uff08\u7eff\u8272\u90e8\u5206\uff09\u7684\u5bbd\u5ea6\uff0c",(0,s.jsx)(n.code,{children:"sw = img.width"}),"\uff1b"]}),"\n",(0,s.jsxs)(n.li,{children:["sh \u662f image \u88c1\u526a\u9009\u62e9\u6846\uff08\u7eff\u8272\u90e8\u5206\uff09\u7684\u9ad8\u5ea6\uff0c",(0,s.jsx)(n.code,{children:"sh = sw / boxRatio"}),"\u3002"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"drawcoverimage-\u4ee3\u7801",children:"drawCoverImage \u4ee3\u7801"}),"\n",(0,s.jsx)(n.p,{children:"\u4e0b\u9762\u662f drawCoverImage \u7684\u4ee3\u7801\uff0c\u56e0\u4e3a cover \u6548\u679c\u4e0d\u4f1a\u7559\u7a7a\u767d\uff0c\u6240\u4ee5\u4e0d\u9700\u8981 fillStyle \u53c2\u6570\u3002"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"function drawCoverImage({\r\n  ctx, img, x, y, width, height\r\n}) {\r\n  const boxRatio = width / height\r\n  const imgRatio = img.width / img.height\r\n\r\n  let sx = 0, sy = 0, sw = 0, sh = 0\r\n  if (imgRatio <= boxRatio) {\r\n    sw = img.width\r\n    sh = sw / boxRatio\r\n    sx = 0\r\n    sy = (img.height - sh) / 2\r\n  } else {\r\n    sh = img.height\r\n    sw = sh * boxRatio\r\n    sx = (img.width - sw) / 2\r\n    sy = 0\r\n  }\r\n\r\n  ctx.drawImage(img, sx, sy, sw, sh, x, y, width, height)\r\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\u5b8c\u6574\u4ee3\u7801",children:"\u5b8c\u6574\u4ee3\u7801"}),"\n",(0,s.jsxs)(n.p,{children:["\u5b8c\u6574\u4ee3\u7801\u53ef\u4ee5\u5728\u7801\u4e0a\u6398\u91d1\u4e0a\u67e5\u770b\uff1a",(0,s.jsx)(n.a,{href:"https://code.juejin.cn/pen/7388885726391992371",children:"https://code.juejin.cn/pen/7388885726391992371"})]}),"\n",(0,s.jsx)(n.h2,{id:"\u603b\u7ed3",children:"\u603b\u7ed3"}),"\n",(0,s.jsxs)(n.p,{children:["\u672c\u6587\u6211\u5206\u6790\u4e86 contain \u6548\u679c\u3001cover \u6548\u679c\u7684",(0,s.jsx)(n.code,{children:"\u56fe\u7247\u5bbd\u9ad8\u6bd4"}),"\u548c",(0,s.jsx)(n.code,{children:"\u5bb9\u5668\u5bbd\u9ad8\u6bd4"}),"\u5173\u7cfb\uff0c\u5e76\u7ed9\u51fa drawContainImage \u548c drawCoverImage \u5de5\u5177\u51fd\u6570\uff0c\u6700\u540e\u7528\u4e24\u4e2a\u5de5\u5177\u51fd\u6570\uff0c\u7ed8\u5236\u4e86\u4e00\u4e2a\u5546\u54c1\u5206\u4eab\u56fe\u3002"]}),"\n",(0,s.jsx)(n.p,{children:"\u62f3\u6253 H5\uff0c\u811a\u8e22\u5c0f\u7a0b\u5e8f\u3002\u6211\u662f\u300c\u5c0f\u9716\u5bb6\u7684\u6df7\u6c5f\u9f99\u300d\uff0c\u5173\u6ce8\u6211\uff0c\u5e26\u4f60\u4e86\u89e3\u66f4\u591a\u5b9e\u7528\u7684 H5\u3001\u5c0f\u7a0b\u5e8f\u6b66\u5b66\u3002"}),"\n",(0,s.jsx)(n.h2,{id:"\u53c2\u8003\u6587\u7ae0",children:"\u53c2\u8003\u6587\u7ae0"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://www.cnblogs.com/AIonTheRoad/p/14063041.html",children:"canvas drawImage \u7ed8\u56fe\u5b9e\u73b0 contain \u548c cover \u7684\u6548\u679c"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://developer.aliyun.com/article/916087",children:"\u5728\u5bb9\u5668\u5185\u663e\u793a\u56fe\u7247\u7684\u4e94\u79cd\u65b9\u6848\uff1acontain\u3001cover\u3001fill\u3001none\u3001scale-down"})}),"\n"]})]})}function o(e={}){const{wrapper:n}={...(0,d.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}},75616:(e,n,i)=>{i.d(n,{Z:()=>s});const s=i.p+"assets/images/canvas-contain-imgRatio-ge-canvasRatio-0ffe824b46c5c3560244a030006c088b.png"},15902:(e,n,i)=>{i.d(n,{Z:()=>s});const s=i.p+"assets/images/canvas-contain-imgRatio-le-canvasRatio-b9832b8b9d37b9a4611c8f3070f50654.png"},57428:(e,n,i)=>{i.d(n,{Z:()=>s});const s=i.p+"assets/images/canvas-contain-948b334521d89ebc949cf6598e343a32.png"},9746:(e,n,i)=>{i.d(n,{Z:()=>s});const s=i.p+"assets/images/canvas-cover-imgRatio-ge-canvasRatio-4f6a92091f45a1602bcc6d5385fe044b.png"},17650:(e,n,i)=>{i.d(n,{Z:()=>s});const s=i.p+"assets/images/canvas-cover-imgRatio-le-canvasRatio-03ca3495c9f340cb4004d73ec4935a61.png"},6211:(e,n,i)=>{i.d(n,{Z:()=>s});const s=i.p+"assets/images/canvas-cover-ca100422dfd200338929f170c0f7efda.png"},74992:(e,n,i)=>{i.d(n,{Z:()=>s});const s=i.p+"assets/images/contain-and-cover-4a7b23b6160b59a6dae609cb4712ad56.png"},99062:(e,n,i)=>{i.d(n,{Z:()=>s});const s=i.p+"assets/images/pdd-05951001c8f3c5fea33fc2268b7cb8fa.jpg"},58094:(e,n,i)=>{i.d(n,{Z:()=>s});const s=i.p+"assets/images/product-4d5aa81e90ba93d3a1789a936724767c.png"},11151:(e,n,i)=>{i.d(n,{Z:()=>l,a:()=>r});var s=i(67294);const d={},c=s.createContext(d);function r(e){const n=s.useContext(c);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:r(e.components),s.createElement(c.Provider,{value:n},e.children)}}}]);