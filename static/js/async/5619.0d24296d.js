"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([["5619"],{6196:function(n,e,t){t.r(e),t.d(e,{default:function(){return o}});var r=t(5893),s=t(65);function a(n){let e=Object.assign({h1:"h1",a:"a",pre:"pre",code:"code"},(0,s.ah)(),n.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(e.h1,{id:"一个小程序组件埋点的优雅思路",children:["一个小程序组件埋点的优雅思路",(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#一个小程序组件埋点的优雅思路",children:"#"})]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-js",children:"function mergeMethods(target, fns) {\n  Object.keys(fns).forEach(key => {\n    if (typeof fns[key] === 'function') {\n      // 如果是组件，fns 需要包裹在 fns 里\n      if (target.hasOwnProperty('methods')) {\n        target.methods = target.methods || {};\n        target.methods[key] = fns[key];\n      }\n      // 如果是页面，直接混入函数\n      else {\n        target[key] = fns[key];\n      }\n    }\n  });\n  return target\n}\n"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-js",children:"const mergeMethods = require('../../../utils/mergeMethods')\nconst track = require('../../utils/track')\n\nconst config = {\n  properties: {\n    commonParams: Object,\n  },\n  methods: {\n    onCompBtnClick() {\n      this.track('click', 'comp id', { btnName: '组件按钮' })\n    }\n  }\n}\n\nComponent(mergeMethods(config, { track }))\n"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-js",children:"const mergeMethods = require('../../utils/mergeMethods')\nconst track = require('../utils/track')\n\nconst config = {\n  data: {\n    commonParams: {\n      channel: 'picture',\n      activityId: '123456'\n    }\n  },\n  onPageBtnClick() {\n    this.track('click', 'page id', { btnName: '页面按钮' })\n  }\n}\n\nPage(mergeMethods(config, { track }))\n"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-html",children:'<button\n  type="primary"\n  style="margin-top: 200rpx;"\n  bind:tap="onPageBtnClick"\n>\n  页面按钮\n</button>\n<comp commonParams="{{commonParams}}" />\n'})})]})}function c(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:e}=Object.assign({},(0,s.ah)(),n.components);return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(a,{...n})}):a(n)}let o=c;c.__RSPRESS_PAGE_META={},c.__RSPRESS_PAGE_META["tmp%2F_2024-09-21-miniprogram-event-tracking%2Findex.md"]={toc:[],title:"一个小程序组件埋点的优雅思路",frontmatter:{}}}}]);