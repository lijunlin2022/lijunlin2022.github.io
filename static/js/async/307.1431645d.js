"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([["307"],{56914:function(n,e,r){r.r(e),r.d(e,{default:function(){return t}});var a=r(85893),i=r(50065);function c(n){let e=Object.assign({h1:"h1",a:"a",p:"p",h2:"h2",code:"code",pre:"pre"},(0,i.ah)(),n.components);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(e.h1,{id:"宕机",children:[(0,a.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#宕机",children:"#"}),"宕机"]}),"\n",(0,a.jsx)(e.p,{children:"宕机就是程序停止运行，服务中断，通常来说是严重的错误。"}),"\n",(0,a.jsx)(e.p,{children:"一般 go 语言宕机时，会立刻执行在 goroutine（可以先理解为线程）中被延迟的函数（defer 机制），随后程序会立刻输出日志信息，包括 panic value 和函数调用的堆栈跟踪信息。"}),"\n",(0,a.jsxs)(e.h2,{id:"手动触发宕机",children:[(0,a.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#手动触发宕机",children:"#"}),"手动触发宕机"]}),"\n",(0,a.jsxs)(e.p,{children:["go 语言中，我们可以直接用 ",(0,a.jsx)(e.code,{children:"panic()"})," 触发宕机。"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-go",meta:"",children:'func main() {\r\n  fmt.Println(1)\r\n  v := 1\r\n  if v > 0 {\r\n    panic("carsh")\r\n  }\r\n  fmt.Println(2)\r\n}\n'})}),"\n",(0,a.jsx)(e.p,{children:"go 语言会输出如下报错信息："}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{meta:"",children:"goroutine 1 [running]:\r\nmain.main()\r\n        E:/learn-go/main.go:11 +0x5f\r\nexit status 2\n"})}),"\n",(0,a.jsxs)(e.h2,{id:"在宕机时触发延迟执行语句",children:[(0,a.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#在宕机时触发延迟执行语句",children:"#"}),"在宕机时触发延迟执行语句"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-go",meta:"",children:'func main() {\r\n  fmt.Println(1)\r\n  defer fmt.Println(3)\r\n  panic("carsh")\r\n  defer fmt.Println(2)\r\n}\n'})}),"\n",(0,a.jsx)(e.p,{children:"carsh 之前的 defer 语句会在宕机之前执行，crash 之后的 defer 语句不会执行。"})]})}function s(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:e}=Object.assign({},(0,i.ah)(),n.components);return e?(0,a.jsx)(e,Object.assign({},n,{children:(0,a.jsx)(c,n)})):c(n)}let t=s;s.__RSPRESS_PAGE_META={},s.__RSPRESS_PAGE_META["zh%2Fdocs%2Fgo%2F13-panic.md"]={toc:[{id:"手动触发宕机",text:"手动触发宕机",depth:2},{id:"在宕机时触发延迟执行语句",text:"在宕机时触发延迟执行语句",depth:2}],title:"宕机",frontmatter:{}}}}]);