"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([["3553"],{34278:function(e,n,r){r.r(n),r.d(n,{default:function(){return d}});var t=r(85893),i=r(50065),a=r(95895);function s(e){let n=Object.assign({h1:"h1",a:"a",p:"p",h2:"h2",code:"code",pre:"pre"},(0,i.ah)(),e.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.h1,{id:"宕机",children:[(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#宕机",children:"#"}),"宕机"]}),"\n",(0,t.jsx)(a.Z,{defaultLocale:"zh-CN"}),"\n",(0,t.jsx)(n.p,{children:"宕机就是程序停止运行，服务中断，通常来说是严重的错误。"}),"\n",(0,t.jsx)(n.p,{children:"一般 go 语言宕机时，会立刻执行在 goroutine（可以先理解为线程）中被延迟的函数（defer 机制），随后程序会立刻输出日志信息，包括 panic value 和函数调用的堆栈跟踪信息。"}),"\n",(0,t.jsxs)(n.h2,{id:"手动触发宕机",children:[(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#手动触发宕机",children:"#"}),"手动触发宕机"]}),"\n",(0,t.jsxs)(n.p,{children:["go 语言中，我们可以直接用 ",(0,t.jsx)(n.code,{children:"panic()"})," 触发宕机。"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",meta:"",children:'func main() {\r\n  fmt.Println(1)\r\n  v := 1\r\n  if v > 0 {\r\n    panic("carsh")\r\n  }\r\n  fmt.Println(2)\r\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"go 语言会输出如下报错信息："}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{meta:"",children:"goroutine 1 [running]:\r\nmain.main()\r\n        E:/learn-go/main.go:11 +0x5f\r\nexit status 2\n"})}),"\n",(0,t.jsxs)(n.h2,{id:"在宕机时触发延迟执行语句",children:[(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#在宕机时触发延迟执行语句",children:"#"}),"在宕机时触发延迟执行语句"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",meta:"",children:'func main() {\r\n  fmt.Println(1)\r\n  defer fmt.Println(3)\r\n  panic("carsh")\r\n  defer fmt.Println(2)\r\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"carsh 之前的 defer 语句会在宕机之前执行，crash 之后的 defer 语句不会执行。"})]})}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,i.ah)(),e.components);return n?(0,t.jsx)(n,Object.assign({},e,{children:(0,t.jsx)(s,e)})):s(e)}let d=c;c.__RSPRESS_PAGE_META={},c.__RSPRESS_PAGE_META["docs%2Fgo%2F13-panic.md"]={toc:[{id:"手动触发宕机",text:"手动触发宕机",depth:2},{id:"在宕机时触发延迟执行语句",text:"在宕机时触发延迟执行语句",depth:2}],title:"宕机",frontmatter:{}}},95895:function(e,n,r){r.d(n,{Z:function(){return d}});var t=r(85893),i=r(67294),a=r(45687);r(6175);let s={"zh-CN":e=>`预计阅读时间: ${e.minutes>=1?`${Math.ceil(e.minutes)} 分钟`:"小于 1 分钟"}`,"en-US":e=>`Estimated reading time: ${e.minutes>=1?`${Math.ceil(e.minutes)} minutes`:"less than 1 minute"}`};function c(e,n,r){let t=Object.keys(s).includes(n)?n:r;return s[t](e)}let d=e=>{let{defaultLocale:n="en-US"}=e,r=(0,a.Vi)().page.readingTimeData,s=(0,a.Jr)(),d=(0,a.e7)(),[h,l]=(0,i.useState)(c(r,s,n));return(0,i.useEffect)(()=>{l(c(r,s,n))},[s,r]),(0,t.jsx)("span",{"data-dark":String(d),className:"rp-reading-time",children:h})}}}]);