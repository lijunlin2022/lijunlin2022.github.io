"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([["637"],{4684:function(n,e,t){t.r(e),t.d(e,{default:()=>c});var r=t("5893"),i=t("65");let s=t.p+"static/image/mouse-drawing.aa094680.gif";function a(n){let e=Object.assign({h1:"h1",a:"a",p:"p",pre:"pre",code:"code",img:"img"},(0,i.ah)(),n.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(e.h1,{id:"鼠标绘制",children:["鼠标绘制",(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#鼠标绘制",children:"#"})]}),"\n",(0,r.jsx)(e.p,{children:"webgl 的 x, y, z 坐标轴，取值是从 -1 到 1。"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-mermaid",children:"graph LR;\r\nA[添加点击事件] --\x3e B[获取点击坐标] --\x3e C[转换为 canvas 坐标] --\x3e D[转换为 webgl 坐标]\n"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)("img",{src:s,alt:""})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-js",children:"const program = initShader(gl, VERTEX_SHADER_SOURCE, FRAGMENT_SHADER_SOURCE)\r\nconst aPosition = gl.getAttribLocation(program, 'aPosition')\r\n\r\nconst points = []\r\ncanvas.onmousemove = function (event) {\r\n  const { clientX, clientY } = event\r\n  const domPosition = event.target.getBoundingClientRect()\r\n  const { left, top, width, height } = domPosition\r\n  const halfWidth = width / 2\r\n  const halfHeight = height / 2\r\n\r\n  const x = (clientX - halfWidth) / halfWidth\r\n  const y = (halfHeight - clientY) / halfHeight\r\n\r\n  points.push({ x, y })\r\n\r\n  points.forEach(p => {\r\n    gl.vertexAttrib2f(aPosition, p.x, p.y)\r\n    gl.drawArrays(gl.POINTS, 0, 1)\r\n  })\r\n}\n"})})]})}function o(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:e}=Object.assign({},(0,i.ah)(),n.components);return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(a,{...n})}):a(n)}let c=o;o.__RSPRESS_PAGE_META={},o.__RSPRESS_PAGE_META["docs%2Fwebgl%2F03-mouse-drawing.md"]={toc:[],title:"鼠标绘制",frontmatter:{}}}}]);