"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([["9166"],{2735:function(n,r,i){i.r(r),i.d(r,{default:()=>g});var e=i("5893"),o=i("65");let a=i.p+"static/image/shutter.12e4ae5c.gif",t=i.p+"static/image/-1-0-1-height.6dbfb3bf.gif",s=i.p+"static/image/0-1-0-opacity.60c7ca67.gif";function l(n){let r=Object.assign({h1:"h1",a:"a",h2:"h2",p:"p",img:"img",pre:"pre",code:"code"},(0,o.ah)(),n.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(r.h1,{id:"片元着色器动画",children:["片元着色器动画",(0,e.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#片元着色器动画",children:"#"})]}),"\n",(0,e.jsxs)(r.h2,{id:"渐入渐出",children:["渐入渐出",(0,e.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#渐入渐出",children:"#"})]}),"\n",(0,e.jsx)(r.p,{children:(0,e.jsx)("img",{src:s,alt:""})}),"\n",(0,e.jsx)(r.p,{children:"关键代码如下："}),"\n",(0,e.jsx)(r.pre,{children:(0,e.jsx)(r.code,{className:"language-js",children:"// ... 省略\r\n// unifrom 必须在 main 函数外面\r\nconst FRAGMENT_SHADER_SOURCE = `\r\n  precision lowp float;\r\n  uniform float uOpacity;\r\n  void main() {\r\n    gl_FragColor = vec4(1.0, 0.0, 0.0, uOpacity);\r\n  }\r\n`\r\n// ... 省略\r\nlet p = 0\r\nlet increasing = true\r\nfunction animation () {\r\n  if (increasing) {\r\n    p = p + 0.02\r\n    if (p >= 1) {\r\n      p = 1\r\n      increasing = false\r\n    }\r\n  } else {\r\n    p = p - 0.02\r\n    if (p <= 0) {\r\n      p = 0\r\n      increasing = true\r\n    }\r\n  }\r\n  gl.uniform1f(uOpacity, p)\r\n  gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4)\r\n\r\n  requestAnimationFrame(animation)\r\n}\r\n\r\nanimation()\n"})}),"\n",(0,e.jsxs)(r.h2,{id:"卷入卷出",children:["卷入卷出",(0,e.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#卷入卷出",children:"#"})]}),"\n",(0,e.jsx)(r.p,{children:(0,e.jsx)("img",{src:t,alt:""})}),"\n",(0,e.jsx)(r.p,{children:"关键代码如下："}),"\n",(0,e.jsx)(r.pre,{children:(0,e.jsx)(r.code,{className:"language-js",children:"const VERTEX_SHADER_SOURCE = `\r\n  attribute vec4 aPosition;\r\n  varying vec4 vPosition;\r\n  void main() {\r\n    gl_Position = aPosition;\r\n    vPosition = aPosition;\r\n  }\r\n`\r\n\r\n// 向上卷出时，vPosition.y > uHeight\r\nconst FRAGMENT_SHADER_SOURCE = `\r\n  precision lowp float;\r\n  uniform float uHeight;\r\n  varying vec4 vPosition;\r\n  void main() {\r\n    if (vPosition.y > uHeight) {\r\n      gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);\r\n    } else {\r\n      gl_FragColor = vec4(1.0, 0.0, 0.0, 0.0);\r\n    }\r\n  }\r\n`\r\n\r\n// ... 省略\r\nlet p = -1\r\nlet up = true\r\nfunction animation () {\r\n  if (up) {\r\n    p = p + 0.02\r\n    if (p >= 1) {\r\n      p = 1\r\n      up = false\r\n    }\r\n  } else {\r\n    p = p - 0.02\r\n    if (p <= -1) {\r\n      p = -1\r\n      up = true\r\n    }\r\n  }\r\n\r\n  gl.uniform1f(uHeight, p)\r\n  gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4)\r\n\r\n  requestAnimationFrame(animation)\r\n}\r\n\r\nanimation()\n"})}),"\n",(0,e.jsxs)(r.h2,{id:"百叶窗",children:["百叶窗",(0,e.jsx)(r.a,{className:"header-anchor","aria-hidden":"true",href:"#百叶窗",children:"#"})]}),"\n",(0,e.jsx)(r.p,{children:(0,e.jsx)("img",{src:a,alt:""})}),"\n",(0,e.jsx)(r.p,{children:"关键代码如下："}),"\n",(0,e.jsx)(r.pre,{children:(0,e.jsx)(r.code,{className:"language-js",children:"// ... 省略\r\nconst FRAGMENT_SHADER_SOURCE = `\r\n  precision lowp float;\r\n  uniform float uHeight;\r\n  varying vec4 vPosition;\r\n  void main() {\r\n    if (vPosition.y < 1.0 && vPosition.y > 0.5) {\r\n      if (vPosition.y > uHeight) {\r\n        gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);\r\n      } else {\r\n        gl_FragColor = vec4(1.0, 0.0, 0.0, 0.0);\r\n      }\r\n    }\r\n    if (vPosition.y < 0.5 && vPosition.y > 0.0) {\r\n      if (vPosition.y > uHeight - 0.5) {\r\n        gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);\r\n      } else {\r\n        gl_FragColor = vec4(1.0, 0.0, 0.0, 0.0);\r\n      }\r\n    }\r\n    if (vPosition.y < 0.0 && vPosition.y > -0.5) {\r\n      if (vPosition.y > uHeight - 1.0) {\r\n        gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);\r\n      } else {\r\n        gl_FragColor = vec4(1.0, 0.0, 0.0, 0.0);\r\n      }\r\n    }\r\n    if (vPosition.y < -0.5 && vPosition.y > -1.0) {\r\n      if (vPosition.y > uHeight - 1.5) {\r\n        gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);\r\n      } else {\r\n        gl_FragColor = vec4(1.0, 0.0, 0.0, 0.0);\r\n      }\r\n    }\r\n  }\r\n`\r\n// ... 省略\r\nlet p = 1\r\nfunction animation () {\r\n  p = p - 0.02\r\n\r\n  gl.uniform1f(uHeight, p)\r\n  gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4)\r\n\r\n  requestAnimationFrame(animation)\r\n}\r\n\r\nanimation()\n"})}),"\n",(0,e.jsx)(r.p,{children:"加入循环后代码如下："}),"\n",(0,e.jsx)(r.pre,{children:(0,e.jsx)(r.code,{className:"language-js",children:"// ... 省略\r\nconst FRAGMENT_SHADER_SOURCE = `\r\n  precision lowp float;\r\n  uniform float uHeight;\r\n  varying vec4 vPosition;\r\n  uniform float uList[5];\r\n  void main() {\r\n    for (int i = 0; i < 4; i++) {\r\n      if (vPosition.y > uList[i + 1] && vPosition.y < uList[i]) {\r\n        if (vPosition.y > uHeight - float(i) * 0.5) {\r\n          gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);\r\n        }\r\n      }\r\n    }\r\n  }\r\n`\r\n// ... 省略\r\ngl.uniform1fv(uList, [1.0, 0.5, 0.0, -0.5, -1.0])\r\n// ... 省略\n"})})]})}function c(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:r}=Object.assign({},(0,o.ah)(),n.components);return r?(0,e.jsx)(r,{...n,children:(0,e.jsx)(l,{...n})}):l(n)}let g=c;c.__RSPRESS_PAGE_META={},c.__RSPRESS_PAGE_META["docs%2Fwebgl%2F10-fragment-shader-animation%2Findex.md"]={toc:[{text:"渐入渐出",id:"渐入渐出",depth:2},{text:"卷入卷出",id:"卷入卷出",depth:2},{text:"百叶窗",id:"百叶窗",depth:2}],title:"片元着色器动画",frontmatter:{}}}}]);