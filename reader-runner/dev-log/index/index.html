<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-readerRunnerSidebar docs-version-current docs-doc-page docs-doc-id-dev-log/index/index" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">开发日志 | 小霖家的混江龙</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://lijunlin2022.github.io/reader-runner/dev-log/index/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="google-site-verification" content="z1w9iBabIBZmBrBiQPn3K-e8msiNRO_hR9O3oWhdcok"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-readerRunnerSidebar-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-readerRunnerSidebar-current"><meta data-rh="true" property="og:title" content="开发日志 | 小霖家的混江龙"><meta data-rh="true" name="description" content="2024.07.24"><meta data-rh="true" property="og:description" content="2024.07.24"><link data-rh="true" rel="icon" href="/img/logo.png"><link data-rh="true" rel="canonical" href="https://lijunlin2022.github.io/reader-runner/dev-log/index/"><link data-rh="true" rel="alternate" href="https://lijunlin2022.github.io/reader-runner/dev-log/index/" hreflang="en"><link data-rh="true" rel="alternate" href="https://lijunlin2022.github.io/reader-runner/dev-log/index/" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="小霖家的混江龙 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="小霖家的混江龙 Atom Feed">




<link rel="alternate" type="application/rss+xml" href="/official/rss.xml" title="小霖家的混江龙 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/official/atom.xml" title="小霖家的混江龙 Atom Feed"><link rel="stylesheet" href="/assets/css/styles.376040d5.css">
<script src="/assets/js/runtime~main.8300688c.js" defer="defer"></script>
<script src="/assets/js/main.09c3cd27.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><b class="navbar__title text--truncate">小霖家的混江龙</b></a><a class="navbar__item navbar__link" href="/blog">技术博客</a><a class="navbar__item navbar__link" href="/docs/html/layout-visual-and-ideal-viewport">技术笔记</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/lijunlin2022" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/reader-runner/dev-log/index/">dev-log</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/reader-runner/dev-log/index/">开发日志</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">dev-log</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">开发日志</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>开发日志</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="20240724">2024.07.24<a href="#20240724" class="hash-link" aria-label="Direct link to 2024.07.24" title="Direct link to 2024.07.24">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="epub-的错误">Epub 的错误<a href="#epub-的错误" class="hash-link" aria-label="Direct link to Epub 的错误" title="Direct link to Epub 的错误">​</a></h3>
<p><img decoding="async" loading="lazy" src="/assets/images/es5-ext-string-contains-e0e797346951f38559c87af24f9a936d.png" width="900" height="300" class="img_ev3q"></p>
<p>它的依赖关系是，epubjs 依赖了 event-emitter，而 event-emitter 又依赖了 es5-ext，而 es5-ext 中，它的文件路径中包含了一个 # 号。</p>
<p>epubjs 底层的依赖非常混乱。在我看来，它的 lodash、es5-ext 还有 d 都是重复的，完全可以优化。</p>
<p><a href="https://github.com/webpack/enhanced-resolve/issues/282" target="_blank" rel="noopener noreferrer">https://github.com/webpack/enhanced-resolve/issues/282</a></p>
<p>我猜测是因为 epubjs 一直迭代，然后后面维护的人已经开始使用 es5 和 es6 的语法了，但是又不愿意重构之前的代码，就演变成这个样子了。</p>
<p>于是我干脆把 epubjs 拷贝了一份，然后把它依赖的 es5-ext 和 d 都拷贝整理了一份。</p>
<p>最终我认为，epubjs 实际需要的依赖只有 3 个：@xmldom/xmldom 和 jszip 和 lodash。</p>
<p>它的其他依赖，完全可以自己手写代替：</p>
<p><img decoding="async" loading="lazy" src="data:image/png;base64,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" width="375" height="280" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="小程序上解析错误">小程序上解析错误<a href="#小程序上解析错误" class="hash-link" aria-label="Direct link to 小程序上解析错误" title="Direct link to 小程序上解析错误">​</a></h3>
<p>因为 epubjs 自己用 XMLHttpRequest 实现了请求。</p>
<p>此外 event-emitter 太离谱了，竟然已经三年没更新了</p>
<p><a href="https://github.com/medikoo/event-emitter" target="_blank" rel="noopener noreferrer">https://github.com/medikoo/event-emitter</a></p>
<p><img decoding="async" loading="lazy" src="/assets/images/2024-07-24-a897f1e82a44f3a278c7d03af71e9e26.png" width="375" height="667" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="20240725">2024.07.25<a href="#20240725" class="hash-link" aria-label="Direct link to 2024.07.25" title="Direct link to 2024.07.25">​</a></h2>
<p>设置字体大小、字体</p>
<p>epubjs 的 rendition 内部有一个 themes，通过设置 themes 的 fontSize 和 font，我们可以改变字体大小、字体。</p>
<p><a href="http://epubjs.org/documentation/0.3/#themes" target="_blank" rel="noopener noreferrer">http://epubjs.org/documentation/0.3/#themes</a></p>
<p><img decoding="async" loading="lazy" src="/assets/images/2024-07-25-909b61752464ccfabc3ab7dc5e43fe1b.png" width="375" height="667" class="img_ev3q"></p>
<p>epubjs 通过 ePub 生成的 book，book 可以通过 loaded 上的属性获取解析的结果：</p>
<ul>
<li>metadata 可以获取标题相关数据</li>
<li>navigation 可以获取导航相关数据</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="20240726">2024.07.26<a href="#20240726" class="hash-link" aria-label="Direct link to 2024.07.26" title="Direct link to 2024.07.26">​</a></h2>
<p>尝试用 class 替换掉 event-emitter，发现替换后原本的方法我不会用了。</p>
<p>关于 class 和 function 原型的关系，我还比较模糊。</p>
<p>一番折腾下来，运 行失败了，代码倒是大致看明白了。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="20270727">2027.07.27<a href="#20270727" class="hash-link" aria-label="Direct link to 2027.07.27" title="Direct link to 2027.07.27">​</a></h2>
<p>格式化了 epubjs 的源代码，发现 epubjs 里有许多方法其实没有实现。</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#20240724" class="table-of-contents__link toc-highlight">2024.07.24</a><ul><li><a href="#epub-的错误" class="table-of-contents__link toc-highlight">Epub 的错误</a></li><li><a href="#小程序上解析错误" class="table-of-contents__link toc-highlight">小程序上解析错误</a></li></ul></li><li><a href="#20240725" class="table-of-contents__link toc-highlight">2024.07.25</a></li><li><a href="#20240726" class="table-of-contents__link toc-highlight">2024.07.26</a></li><li><a href="#20270727" class="table-of-contents__link toc-highlight">2027.07.27</a></li></ul></div></div></div></div></main></div></div></div></div>
</body>
</html>