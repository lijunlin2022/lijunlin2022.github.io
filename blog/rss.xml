<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>李俊霖的网络日志 Blog</title>
        <link>https://lijunlin2022.github.io/blog</link>
        <description>李俊霖的网络日志 Blog</description>
        <lastBuildDate>Thu, 14 Dec 2023 00:00:00 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[H5 不复制元素的循环轮播图如何实现]]></title>
            <link>https://lijunlin2022.github.io/blog/2023/12/14/loop-swiper</link>
            <guid>https://lijunlin2022.github.io/blog/2023/12/14/loop-swiper</guid>
            <pubDate>Thu, 14 Dec 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[过去我一直以为，循环轮播图必须拷贝元素，欺骗用户才能实现。]]></description>
            <content:encoded><![CDATA[<p>过去我一直以为，循环轮播图必须拷贝元素，欺骗用户才能实现。</p>
<p>举例来说，如果实现 Item0 ~ Item4 循环播放，我必须用 7 个元素。多出的 2 个元素，一个是 Item0 的复制品，另一个是 Item4 的复制品，分别被我放在队尾和队头。当轮播图滚动到队头（队尾）的时候，我会调整滚动距离把用户看到的复制品替换为原品。</p>
<p><img loading="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAArwAAAAZCAIAAABclmpgAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAEXRFWHRTb2Z0d2FyZQBTbmlwYXN0ZV0Xzt0AAATiSURBVHic7dxfTFNnGMfxt4sJFOiQDQTiggSqW8dIWjCzyNhUAoYumeAMmTi3+CejWciyOKLuDzGGzakjgSxEWrdqzBaG0DlNZhvasE1qi8PI6c04XkgvGEsLRUutpXDFLpo0i8nqaULyvMf8PneHG755QnoezntAMT0TYAAAAABPssa+nE/dIA8NabO2yAR1hWwYVBUYl3QYV0owrpRgXCkxqCpwW0ziGeoAAAAAkAcsDQAAACAJlgYAAACQBEsDAAAASIKlAQAAACTB0gAAAACS8Lg0xCLhPmOT47tvqEN45/OKHTsPGTUGU1tnLBKlzpEHwenGuKToP9lr1BiMGkPHzkM+r0idwzuHxRof1+nmj0OBIHWOPMQiUVNbp8NipQ7hnU8Y+2K7urVU0WdsikXCtDE8Lg2ugfNe51XqCt7FIlHH99aa5obu8SHGmGvQTl0kA4LTbf7oK+oKGXBYrA+Doe7xIZNoq2luGDxlxo0wCcHpnhi++fXvl0yirahMfflLE7ZSKVyDdu/IGHUF72KR8LD57OstrT3eBcaYa+A8bQ93S0PI//eky7GhfDN1CO/8U9Oh2Xl1ZZlSlbll1w6fIOJzKrn+k71Xui5seWsHdYgM1B/aY+ztUKoyGWPqyrKVlZVQYJ46il+6uurjgz05BXmMMc1W3cLc/aXoInUU70KBoOgWNryykTqEd/57k6HAjHrza0pVtr5p/9QdD+3DBu6WBtu5U/qm93IKXqAO4V04+EChUOQU5MYv8Tn1RJqtus5hy/pNxdQh8DQTPUJRmTq+QEASdvNlfWNtTn4udQjvwnN+hUKRuCcuzP6z9OghYQ9fS4NPGFtefPSifht1iDysXfd8emYGYyw77zllViZ1Du90ddXUCbJ069pITn5uYWkRdQjvBKfbqDGIHkG/q5a6hXc+r7i8uLTp1XLqEHlYm78+PetZxlj2ukKlKps2hqOlIRYJ//HjuW3vfhifDgCQc1isokeoP7wnflQBSejqqk2ibXf7wYvHuvDqaBKxSPTGT9ff2Ptm/HcekBeOloa7npG0jKwSXRV1iGwkjiTCwQexR3ihAVaZw2J1DdoPnGkv0WqoW2TjJb12/cbie3f+og7h191b3rSMdPxQSZc4kgjP+cn/emIN7bf/r8mbztF+02i/KX7pdV4NTvv2dfbRVnHrsSOJxFEFwKpwWKwTwzePXDqN4/mULEUXF+bu5xUVUofwS/QIowO20QFb/NI7MjY/E2g50UZbxa3HjiQSRxVUOHrSsK+zzzy1Yp5a6fEuaOsa3z5+FhtDEoWlRWkZ6bev34hFon9e+61Ep8EDZFgtgtPtGrQ3f9aKjUEKwelO/HuG29dvMMaKyzdRR/Gr5USbSbSZRFv3+JC2tmp3+0FsDEkUql9Oy8i6/etALBK+9csPpZVbaV9r4OhJA6REqcqsP7zn4rGuK10XtLVVNc0N1EXw9BA9QnDaf3bvJ4mvtH77Od4k/T+6uurgtP/T7e8zxvKKCg+caceyBatFqcre2Xr0wpH9P58+qq1rrHnnA9oehXlqhbZALhrSZm2RCeoK2TCoKjAu6TCulGBcKcG4UmJQVdiX86kr+MXR8QQAAADwDEsDAAAASIKlAQAAACTB0gAAAACSYGkAAAAASRTTMwHqBgAAAJCBfwGqYsR3SAhWWwAAAABJRU5ErkJggg==" width="700" height="25" class="img_ev3q"></p>
<p>确实，这种做法简单易懂。但不复制元素，真的不能实现循环轮播吗？各个大厂的轮播图，给了我答案——<strong>不复制元素，也可以实现循环轮播。</strong></p>
<p>比如，苹果官网的循环轮播图没有复制元素。</p>
<p><img loading="lazy" src="https://lijunlin2022.github.io/assets/images/apple-a0aceaf6d7cc99443fcc150750363688.png" width="800" height="650" class="img_ev3q"></p>
<p>阿里的 <a href="https://mobile.ant.design/components/swiper" target="_blank" rel="noopener noreferrer">Ant Design Mobile Swiper</a> 也没有复制元素。</p>
<p><img loading="lazy" src="https://lijunlin2022.github.io/assets/images/antd-mobile-fb968342e95cda93f287f9fd3c7b9933.gif" width="1150" height="180" class="img_ev3q"></p>
<p>如果你也想知道，大厂是如何做到不复制元素也能循环轮播的。看了这篇文章，你一定有所收获。我会先解释原理，然后给出计算轮播元素位置的公式，最后再给出原生的 JS 代码。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="约定">约定<a href="https://lijunlin2022.github.io/blog/2023/12/14/loop-swiper#%E7%BA%A6%E5%AE%9A" class="hash-link" aria-label="Direct link to 约定" title="Direct link to 约定">​</a></h2>
<p>为方便读者理解下文，我需要和读者们做一些约定。</p>
<ul>
<li>轮播组件是整屏的轮播，轮播时只会向左切换一个元素，或者向右切换一个元素。</li>
<li>轮播容器称为 List，轮播元素称为 Item。</li>
<li>List 有 5 个 Item，分别是 Item0 到 Item4。之所以选择 5 个 Item，是因为奇数个 Item 更容易找到 List 的中心。</li>
<li>currentIndex 代表 List 中心 Item 的下标。轮播到 Item0 时，currentIndex 是 0。轮播到 Item5 时，currentIndex 是 5。</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="轮播原理">轮播原理<a href="https://lijunlin2022.github.io/blog/2023/12/14/loop-swiper#%E8%BD%AE%E6%92%AD%E5%8E%9F%E7%90%86" class="hash-link" aria-label="Direct link to 轮播原理" title="Direct link to 轮播原理">​</a></h2>
<p><strong>初始化</strong></p>
<p>下图是初始化时，List 中 Item 的排列。它是怎么得到的呢？</p>
<p><img loading="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfQAAAAZCAIAAABIGUs1AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAEXRFWHRTb2Z0d2FyZQBTbmlwYXN0ZV0Xzt0AAAOgSURBVHic7d1bSFNxAMfx/yKXa3ZTKYNl2pLmKTBO4gWpKGzFIrsYlFQEmWURQRehhyTDEKErNnJqFCSyDCxrbIhFC4akoyaGTUOXZQsczRLbdJ092MPChyidJfz/5/D7vM2nL2Pn5/GcyZH1uwcIAABIy0zLdwftBhHQzeHxRoVPN4df0vSYdoVofNqyHZ+u8OFgDNMM2gEAADD9MO4AABKEcQcAkCCMOwCABGHcAQAkCOMOACBBDI273WQtTNYVJusqCor9Q8O0c8QhGBDqSvR2k5V2COveDXhWXyyVHT5aWFs3KgRp54iDy+GsK9EHAwLtENaZK42h7bq084Snz0075xdWxt3lcLY+eX715X1Dl0XNc4037uEjFY72py22egvtCtaNCsHrT58VbdaO3NITQh468C3pybkczsv7ztKuEAG7yTrkGbzZ3mjosmgP5daXVTFybsrKuKt57mRNqXL+XEKIJj1l8LNHCARoR7HOPzT85oWdy+Jph7Cu/+vXPq83NSFBIY84kJlh6+nFyfvEzJVGY+ktbf5u2iEikLZtw76SExGRckLI0lVJZGzM9w3j/hfdbR1qngsNPUzghdGclauNUcXRDmGd1+eTEVlsVFTo5Qfv4IiAvwsnoklPOf9Ir1qRSDsE/h1b4+5yOAuTde3NLalb1tJuYZ2nz/3DPxrPqWmHiENCbMxsuZwQEhsVtUA5m3YO69Q8RztBlF412WJUcdGLF9IOIYS1cVfznKHLkld8vOZ0OTv3JRgUDAgtDc1ZuVp5ZCTtFgAghBC7ydre3JJ9cEfoEg11bI17SDy3PDFF87Gzh3YIu/qdvbOUikWJKtohojF+Kcbr833zj9DOAamxm6zNdxoKrp1j56icSTvgD4RAYPCzJyNnI+0QdnW3dZgqak0VtaGXtnrLF/fA1mN5dKuY9dulmPFLNADTwm6ytj55fupuGVN3ClkZd5fDaa405l8uUs6f+9b2mhASt4yVX4AM2nosLzTlwYDwoLw6ac3KtG0baEexKz46ep5C0dTZuYvna1+2rk1arpBH0I4CiXA5nKFzdqaWnbAz7mqey8jZeCZzLyFEpVnG4DsF4qWQR5zalL2nqnr/7TtH16/bxePLozBtuts63N3vL+iOjP+kqO4KC3ekZYYu/AvM5PB8gCnBwzqmBA/rmBIcjGFi8YYqAAD8J4w7AIAEYdwBACQI4w4AIEEYdwAACZL1uwdoNwAAwDT7CfqRNhTklVPdAAAAAElFTkSuQmCC" width="500" height="25" class="img_ev3q"></p>
<p>可以这样理解，初始化时，我们希望 Item0 处于 List 中心时，两边的元素尽可能相等。</p>
<p>我们的做法是，Item0，Item1 和 Item2 位置保持不变。将 Item3 和 Item4 往前挪动 5 个位置。</p>
<p><img loading="lazy" src="data:image/png;base64,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" width="700" height="100" class="img_ev3q"></p>
<p><strong>Item1 为中心</strong></p>
<p>下图是 List 从 Item0 轮播到 Item1 时的排列，此时 Item1 处于 List 的中心。</p>
<p><img loading="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfQAAAAZCAIAAABIGUs1AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAEXRFWHRTb2Z0d2FyZQBTbmlwYXN0ZV0Xzt0AAAOVSURBVHic7d1RSFNRHAbws0ibqSMT1GgVtYR5FcRrmLF6SGrIQit8KOlBMIpZElQYvYhCEZIVYUGWUJQsMxDM5QgLJ4yRjtwycgq6JJvkClPWrNv2UA8ThaCaMTj/Xb7f293Tx+Wc795zLuMoJr3TDAAA5GWl5auTdwbqDMki7lLkDMnihmdPeKeIGR+K92N0RQ6TMXIreAcAAIDoQ7kDAMgQyh0AQIZQ7gAAMoRyBwCQIZQ7AIAM0Sr3kBQ01d90mK28g1Dnm/BePFhtzDKY6m+GpCDvOLHBPu4xtpq+B0O8g1DXfavNmGUwZhkuHqz2TXh5x6HOYbaGb1fTsdr5OT/vOEtolbvrud3WbuGdgrqQFHxxv1NfWXbD1ckYcz23804UA+zjnp0Nl3mniAEOs3XON3PD1dk8YtFXlrVfuk2qsKjxON39Xb1XXz5qHrFoRKHz+gM6L1uEyn1+zv+mzyHoRN5BqPvy8dOMd3pTTmacMr6wtGhscJjOeKLpwtPuk6aHNcV63kFiQEHJ7iP11XHKeMbYppxM9vNnYBbl/kcaUTjVciFxjYoxpt2eOzPlC0oS71ALCJV7X1u3rkyfqs7gHYS6wKyfKRRJKarwJanxRFORVvu6rjZXreYdBORsdGBIIwrhoqeASrn7Jrw/5r9vFDS8g8SG1PXp8UolYywpRbValcQ7DnW6rRhX/+PVM1uqOmPtujTeQajzON3GLIOrx76teBfvLEtIlHtICto7enRl+nBhAQB3DrPV1WPfU3EgvEUDf6ERheYRS3ntiZYzDXQ+QZMo90n3+KrEhPTNWDVHanErJjDr/+YP8I4DcuMwW3vudhy7dh6zMnIbha2bc7Xv347xDrJgJe8AjDE2OjBkbmo1N7WGL23tls/e6X1V5XxTkfXbVsziFg1AVDjM1v6u3tP3LtHZPo4JQUmamfIVlhbxDrKARLnvqyoPV3lICj5uuJOZn11Qspt3KLrWrktLSE4ctg3m7dX1d/Vm5mdj4QzR4nG6w+/saPZIeJzu7lttRxtrEteohm2DjLGMLVTWOiTKHZYlThm/p+JAy5mGu+cadx0y5O3V8U4E8jE6MOQdfVdnOL74S43pikYUOEaiTCMKhaVFZ3ccZoyptVtIPRQVzSP409A/4HyAZcFhHcuCwzqWBZMxciQ+qAIAQHSh3AEAZAjlDgAgQyh3AAAZQrkDAMiQYtI7zTsDAABE2S/WtzYf9+X3ZQAAAABJRU5ErkJggg==" width="500" height="25" class="img_ev3q"></p>
<p>和初始化时理解方式一致，我们希望 Item1 处于 List 中心时，两边元素尽可能相等。</p>
<p>我们的做法是：Item1，Item2 和 Item3 位置保持不变。将 item4 和 Item1 往前挪动 5 个位置。</p>
<p><img loading="lazy" src="data:image/png;base64,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" width="700" height="100" class="img_ev3q"></p>
<p><strong>循环</strong></p>
<p>按照上述步骤，分别列出 List 中心是 Item0 到 Item4 的情况，可以得到下图：</p>
<p><img loading="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfQAAAB9CAIAAADbfAZ5AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAEXRFWHRTb2Z0d2FyZQBTbmlwYXN0ZV0Xzt0AABBPSURBVHic7d1xTJNpngfwpxfogCCnYBSzXRRKY6kmrNUIpsNdJNA1ZeV0mazDcRMTEa1zxDtxMCYnIxuMIceMa5ATkDknM6TXwYS1R6eNix5lt9PYNtIenpROpOKwNUNnqJBugU77B/dHJ3U1CrxeN8/T976f/9q/vnnzvt++fd6n/QkCgQCB15sLLKzLWEM7RcLA4eIEh4sTHC5O/op2AAAAiD/BlHeadgYAAIizJOOfHLQzME21Vo5DtHqqtfKf3v5P2ikSxh/3/x3OrtXDxcgJlmUAAHgI5Q4AwEModwAAHkK5AwDwEModAICHUO4AADzERLnb9SZ1gUpdoGqva5qfwy9mVyUSCmuaO+x6E+0grPt62vezX7cIjp1Q92oWwxHacRKDx+HSNHdEQmHaQVhn6NRGu+vioXrfpJd2nBfQL3ePw2UdGPr43hdd40axXKa78jlOqdVw3rGY+4y0U7BuMRz5zZ27jT9XLlzrIIT81oFd0ivzOFxtNR/QTpEA7HrTnM9/1anrGjcqj1b1Xepm6t6UfrmL5bJTPS1p6zIIIdKiQv9TXzgUoh2KdfNzgQfDdplCTjsI66aePZucmdm9dWuqMPm9vcXmRxO4eV+eoVOrbbmmrH2HdpAEsOfAvprm+uQUISFkyw4JWVoKzqLcX8NtGxXLZdGih2UMaw2KKmWWKJt2ENbNBIMCItiQnh59+WTGvxDG98LlSIsKz9/qEG3LpR0E/q9YKXePw6UuUDkHLbv3l9DOwjrfpPeH+cUcmZh2kMSwdUPWGqGQELIhPX19Gv5TcAViuYx2hIR0/7Y5S5SduXkj7SDPsVLuYrmsa9xY3fR+T0Mra88lmBIJhS39g4oqpTAlhXYWACCEELve5By0lB05GF2iYQQr5R6VI8vPLZR+8/AR7SDsmnJNvJWWuilXRDtIwogtxcwEg7PzC7TjAN/Y9abBG/11l8+xdlUm0Q7wgnAo5H/qK64spR2EXW7bqL69V9/eG31p7jN+752uOFlNNxWzXlqKiS3RAMSFXW+yDgyd/vQSg08K6Ze7x+EydGpr2xrT1mWMmUcIIdl5bH0AMqXiZHW0yiOh8M3W65Jd2/cc2Ec7FLtyMjP/OjX19sOHv5TLe+9ZSyT5qcJk2qGAJzwOV/SencFmJyyUu1guK64sPbP3XUKISJrH7JGCRJQqTD5dXna4+/o/fHLjxN/+zS/l2DwKceO2jXrdjy+ojsfeadR8xM4TaUHXOH4IsxzMB+AEwzo4wbAOTnAxcsLWA1UAAIgLlDsAAA+h3AEAeAjlDgDAQyh3AAAeEkx5p2lnAACAOEvC1qLlYfcVJ9gKyQm2QnKCi5ETLMsAAPAQyh0AgIdQ7gAAPIRyBwDgIZQ7AAAPodwBAHiIoXKPhMKa5g673kQ7COt8k96Lh+rVBSpNc0ckhHHPq2KZ8Kh7NYvhCO0grDN0atUFKnWB6uKhegy8XJFdb4oerva6pvm5AO04L2Co3J13LOY+/P/wCiKh8N3PdMqjVVedOkKI846FdqIEYJnwvN36r7RTJAC73jTn81916rrGjcqjVX2XulkrLKZ4HC7rwNDH977oGjeK5TLdlc+Zutlipdzn5wIPhu0yBWYprODZt9/5vdNbdkiSU4TFlaWPRsaYOp8Y1PKl4R81/9G4X0k7SALYc2BfTXN9dMrzlh0SsrQUnEW5v5ZYLjvV0xIdLiQtKvQ/9YVDIdqhnmOl3Ie1BkWVMkuUTTsI64KzASIQpK//cVgVa+cTg0ql0v++0FQowuxG+Aty20bFchlTU+SYKHffpPeH+cUcmZh2kMSQ9ZNNwpQUQkj6+ow1Gem047BOkY/z6k3cv23OEmVnbt5IOwjrPA6XukDlHLTs3l9CO8sL6Jd7JBS29A8qqpTRwgIA6ux6k3PQUnbkYHSJBpYhlsu6xo3VTe/3NLQy9QiafrlPuSbeSkvdlItvzasVW4oJzgYWAkHacYBv7HrT4I3+usvncFWuXo4sP7dQ+s3DR7SDPJdEOwBx20b17b369t7oS3Of8XvvdMXJarqpmPXSUkxsiQYgLux6k3Vg6PSnl5haPmZfOBTyP/UVV5bSDvIc/XKvOFkdrfJIKHyz9bpk1/Y9B/bRDsWuzM0bU9emjZlHdpYrrANDkl3b8cUZ4sXjcEXv2dHsq+FxuAyd2tq2xrR1GWPmEUJIdh5D33XolztwkpwiLDtysKeh9cbZtpLDqp3lCtqJgD/ctlGv+/EF1fHYO42aj8RyGcVILBPLZcWVpWf2vksIEUnzWPtQFHSN43dDy8F8AE4wrIMTDOvgBBcjJ/QfqAIAQNyh3AEAeAjlDgDAQyh3AAAeQrkDAPCQYMo7TTsDAADEWRK2Fi0Pu684wVZITrAVkhNcjJxgWQYAgIdQ7gAAPIRyBwDgIZQ7AAAPodwBAHgI5Q4AwENMlLtv0nvxUL26QKVp7oiEwrTjJAaPw4XDtRotXxoEx04Ijp342a9bvp720Y7DOrvepC5QqQtU7XVN83MB2nESQyQU1jR32PUm2kFeQL/cI6Hw3c90yqNVV506QojzjoV2ogTgcbjaaj6gnSIBaKy2p7NzC9c6lj7pbvy58p+0ff7gPO1Q7PI4XNaBoY/vfdE1bhTLZborn+PuYTWcdyzmPub+O51+uT/79ju/d3rLDklyirC4svTRyBjOp+UZOrXalmvK2ndoB0kANcVFXe/VpAqTCSG7t25dIkszQUydfS2xXHaqpyU6cUJaVBib1gvLmJ8LPBi2yxRy2kFeRr/cg7MBIhCkr/9xggnOpxVJiwrP3+oQbculHQT4zG0bFctlTI0WYtOw1qCoUmaJsmkHeRn9cid/NuX5penP8EoYe/Zmbt6/n7thQ05mJu0grPM4XOoClXPQsnt/Ce0srPNNen+YX8yRiWkHeQUmyh3gL01jtfWPOE6Xl0WXaGAZYrmsa9xY3fR+T0Orb9JLOw67IqGwpX9QUaWM3puyholyjy3FBGcDCwEsiUKcaay2tt8N9p04vi17E+0sCSNHlp9bKP3m4SPaQdg15Zp4Ky11U66IdpBXS6Id4OWlmNgSDUBcaKy23nu2/zrTkJWeRjtLIgmHQv6nvuLKUtpB2OW2jerbe/XtvdGX5j7j997pipPVdFPF0C/3zM0bU9emjZlHdpYrrANDkl3bk1OEtEMBT1gmPNF7djT7angcLkOntratMW1dxph5hBCSncfobSkLKk5WR6s8EgrfbL0u2bV9z4F9tEM9R7/ck1OEZUcO9jS03jjbVnJYtbNcQTsR8MeQ2z36R6/0/Iexd746d1aRz+LjLxaI5bLiytIze98lhIikeXWXz2G3TOISdI0zt/eeKZgPwAmGdXCCYR2c4GLkhIkHqgAAEF8odwAAHkK5AwDwEModAICHUO4AADwkmPJO084AAABxloStRcvD7itOsBWSE2yF5AQXIydYlgEA4CGUOwAAD6HcAQB4COUOAMBDKHcAAB5CuQMA8BBD5e5xuDTNHZFQmHYQ1hk6teoClbpAdfFQPaagrUhjtQmOnRAcO7H/N+3+4DztOIkhEgprmjvsehPtIKzzTXovHqpXF6gY7C5Wyt3jcLXVfEA7RQKw601zPv9Vp65r3Kg8WtV3qXt+LkA7FLssE57ee7aZK5eXPulWSMT/cku3GI7QDpUAnHcs5j78GfgKIqHw3c90yqNVV506QojzjoV2ohcwUe6GTq225Zqy9h3aQRLAngP7aprro8OqtuyQkKWl4CzK/bUU+eLbp09FxzCVSqVPZvwLYbZurxg0Pxd4MGyXKeS0g7Du2bff+b3TW3ZIklOExZWlj0bGmLp5Z6LcpUWF5291iLbl0g4CfDbkdiskYszbW9Gw1qCoUmaJsmkHYV1wNkAEgvT1Pw6r8j/1hUMhupH+HBPlLpbLaEdISPdvm7NE2ZmbN9IOwjrLhEdw7ET/iONXu3fTzsI636T3h/nFHBkmEa5K1k82CVNSCCHp6zPWZKTTjvMCJsod3oBdb3IOWsqOHMQ88RUp8sVLn3T/W83fH+6+/vW0j3YcdkVCYUv/oKJKGS0sSGgo94Rk15sGb/TXXT63KRfD6VdLnpNTnJd3/8kT2kHYNeWaeCstFSfV6sWWYoKzgYVAkHacFyTRDgCc2fUm68DQ6U8vYTI9Jwvh8JMZ/3t7i2kHYZfbNqpv79W390ZfmvuM33unK05W003FrJeWYmJLNIxAuScYj8MVvWdHs6+GZcLTojdo6mqz0tNuP3xICJFm4znha1WcrI5WeSQUvtl6XbJr+54D+2iHYlfm5o2pa9PGzCM7yxXWgSHJru1MrZGi3BOM2zbqdT++oDoee6dR8xGeSL+OIl/83t6iDf/cQAgp/Kmo78Rx7JaBeElOEZYdOdjT0HrjbFvJYdXOcgXtRC8QdI3jpwrLwXwATjCsgxMM6+AEFyMneKAKAMBDKHcAAB5CuQMA8BDKHQCAh1DuAAA8JJjyTtPOAAAAcZaErUXLw+4rTrAVkhNsheQEFyMnWJYBAOAhlDsAAA+h3AEAeAjlDgDAQyh3AAAeQrkDAPAQE+Vu6NSqC1TqAtXFQ/W+SS/tOKyz603Rw9Ve1zQ/F6AdJzEshiPqXo3GaqMdhHW+Se/FQ/XqApWmuSMSCtOOkxg8DheDh4t+udv1pjmf/6pT1zVuVB6t6rvUjcJahsfhsg4MfXzvi65xo1gu0135nLVTik2/dTi6f/8H2ilYFwmF736mUx6tuurUEUKcdyy0EyUAj8PVVvMB7RSvQL/c9xzYV9NcH51gsmWHhCwtBWdR7q8llstO9bRExzBJiwpjIxxhGf7g/JcP/ke5HSNNVvDs2+/83uktOyTJKcLiytJHI2O4dVieoVOrbbmmrH2HdpBXoF/u8MbctlGxXIZ5eyu6Njx89G1F7oYNtIOwLjgbIAJB+vofzyjcOqxIWlR4/laHaFsu7SCvwFa5379tzhJlZ27eSDsI6zwOl7pA5Ry07N5fQjsL676e9v0pFJLn5NAOkhhiU55fmv4Mr8TyhEuGyt2uNzkHLWVHDjI1ZJZNYrmsa9xY3fR+T0MrHkEvYzEc+fevvqp9++01QpxU8P8LK+Vu15sGb/TXXT63KVdEO0vCyJHl5xZKv3n4iHYQdjmmptampGzL3kQ7SMKILcUEZwMLgSDtOPDmkmgHIIQQu95kHRg6/eklLB9zEg6F/E99xZWltIOwa8jt/lA38KFuIPqy+/d/eDwz0/SLCrqpmPXSUkxsiQYSEf1y9zhc0Xt2NPtqeBwuQ6e2tq0xbV3GmHmEEJKdh+86r9X0i4polS+GI6f7bpZI8muKi2iHYlfm5o2pa9PGzCM7yxXWgSHJru1YI01c9MvdbRv1uh9fUB2PvdOo+YjlxxR0ieWy4srSM3vfJYSIpHn4UIQ4Sk4Rlh052NPQeuNsW8lh1c5yBe1E8OYEXeNG2hmYhvkAnGBYBycY1sEJLkZOWHmgCgAAcYRyBwDgIZQ7AAAPodwBAHgI5Q4AwEOCKe807QwAABBnSesy1tDOwLS5wAIO0erhcHGCw8UJDhcnWJYBAOCh/wX8mx7aTtQ2mgAAAABJRU5ErkJggg==" width="500" height="125" class="img_ev3q"></p>
<p>一个循环轮播就实现了。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="代码实现">代码实现<a href="https://lijunlin2022.github.io/blog/2023/12/14/loop-swiper#%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0" class="hash-link" aria-label="Direct link to 代码实现" title="Direct link to 代码实现">​</a></h2>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[移动端 H5 Tab 如何滚动居中]]></title>
            <link>https://lijunlin2022.github.io/blog/2023/07/30/tab-scroll-to-center</link>
            <guid>https://lijunlin2022.github.io/blog/2023/07/30/tab-scroll-to-center</guid>
            <pubDate>Sun, 30 Jul 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[Tab 在 PC 端、移动端应用都上很常见，不过 Tab 在移动端 比 PC 端更复杂。为什么呢？移动端设备屏幕较窄，一般仅能展示 4 ~ 7 个 Item。考虑到用户体验，UI 往往要求程序员实现一个功能——点击 Item 后，Item 滚动到屏幕中央，拼多多的 Tab 就实现了这个功能。]]></description>
            <content:encoded><![CDATA[<p>Tab 在 PC 端、移动端应用都上很常见，不过 Tab 在移动端 比 PC 端更复杂。为什么呢？移动端设备屏幕较窄，一般仅能展示 4 ~ 7 个 Item。考虑到用户体验，UI 往往要求程序员实现一个功能——点击 Item 后，Item 滚动到屏幕中央，拼多多的 Tab 就实现了这个功能。</p>
<p><img loading="lazy" src="https://lijunlin2022.github.io/assets/images/pdd-bbe07676c502413e147ffb0b5a48f9e0.gif" width="402" height="281" class="img_ev3q"></p>
<p>如果你也想实现这个功能，看了这篇文章，你一定会有所收获。我会先说明 Tab 滚动的本质，分析出滚动距离的计算公式，接着给出伪代码，最后再给出 Vue、React 和微信小程序的示例代码。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="tab-滚动的本质">Tab 滚动的本质<a href="https://lijunlin2022.github.io/blog/2023/07/30/tab-scroll-to-center#tab-%E6%BB%9A%E5%8A%A8%E7%9A%84%E6%9C%AC%E8%B4%A8" class="hash-link" aria-label="Direct link to Tab 滚动的本质" title="Direct link to Tab 滚动的本质">​</a></h2>
<p>Tab 滚动，本质是包裹着 Item 的容器在滚动。</p>
<p>如下图，竖着的虚线长方形代表手机屏幕，横着的长方形代表 Tab 的容器，标着数字的小正方形代表一个个 Tab Item。</p>
<p>左半部分中，Tab 容器紧贴手机屏幕左侧。右半部分中，Item 4 位于屏幕中央，两部分表示 Item 4 从屏幕右边滚动到屏幕中央。</p>
<p><img loading="lazy" src="https://lijunlin2022.github.io/assets/images/scroll-left-c0b4e3e5ef952e43a5dc0832ce6effd3.png" width="875" height="372" class="img_ev3q"></p>
<p>不难看出，Item 4 滚动居中，其实就是容器向左移动 distance。此时容器滚动条到容器左边缘的距离也是 distance。</p>
<p>换句话说，<strong>让容器向左移动 distance，Item 4 就能居中。</strong> 因此只要我们能找出计算 distance 的公式，就能控制某个 Item 居中。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="计算-distance-的公式">计算 distance 的公式<a href="https://lijunlin2022.github.io/blog/2023/07/30/tab-scroll-to-center#%E8%AE%A1%E7%AE%97-distance-%E7%9A%84%E5%85%AC%E5%BC%8F" class="hash-link" aria-label="Direct link to 计算 distance 的公式" title="Direct link to 计算 distance 的公式">​</a></h2>
<p>该如何计算 distance 呢？我们看下方这张更细致的示意图。</p>
<p>屏幕中央有一条线，它把 Item 4 分成了左右等宽的两部分，也把手机屏幕分成了左右等宽的两部分。你可以把 Item 4 一半的宽度记为 <code>halfItemWidth</code>，把手机屏幕一半的宽度记为 <code>halfScreenWidth</code>。再把 Item 4 左侧到容器左侧的距离记为 <code>itemOffsetLeft</code>。</p>
<p><img loading="lazy" src="https://lijunlin2022.github.io/assets/images/calculate-scroll-left-3664016f8945708fdc0b59f9fe16d043.png" width="645" height="541" class="img_ev3q"></p>
<p>不难看出，这四个值满足如下等式：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">distance + halfScreenWidth = itemOffsetLeft + halfItemWidth</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>简单推导一下，就得到了计算 distance 的公式。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">distance = itemOffsetLeft + halfItemWidth - halfScreenWidth</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="公式的伪代码实现">公式的伪代码实现<a href="https://lijunlin2022.github.io/blog/2023/07/30/tab-scroll-to-center#%E5%85%AC%E5%BC%8F%E7%9A%84%E4%BC%AA%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0" class="hash-link" aria-label="Direct link to 公式的伪代码实现" title="Direct link to 公式的伪代码实现">​</a></h2>
<p>现在开始解释公式的代码实现。</p>
<p>先看下 <code>itemOffsetLeft</code>、<code>halfItemWidth</code> 和 <code>halfScreenWidth</code> 如何获取。</p>
<ul>
<li>
<p><code>itemOffsetLeft</code> 是 Item 元素到容器左侧的距离，你可以用 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLElement/offsetLeft" target="_blank" rel="noopener noreferrer">HTMLElement.offsetLeft</a> 作它的值。</p>
</li>
<li>
<p><code>halfItemWidth</code> 是 Item 元素一半的宽度。<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLElement/offsetWidth" target="_blank" rel="noopener noreferrer">HTMLElement.offsetWidth</a> 是元素的整体宽度，你可以用 <code>offsetWidth / 2</code> 作它的值，也可以先用 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Element/getBoundingClientRect" target="_blank" rel="noopener noreferrer">Element.getBoundingClientRect()</a> 获取一个 <code>itemRect</code> 对象，再用 <code>itemRect.width / 2</code> 作它的值。</p>
</li>
<li>
<p><code>halfScreenWidth</code> 是手机屏幕一半的宽度。 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/innerWidth" target="_blank" rel="noopener noreferrer">window.innerWidth</a> 是手机屏幕的整体宽度，你可以用 <code>innerWidth / 2</code> 作它的值。</p>
</li>
</ul>
<p>再看下如何把 distance 设置到容器上。</p>
<p>在 HTML 中，我们可以使用 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Element/scrollLeft" target="_blank" rel="noopener noreferrer">Element.scrollLeft</a> 来读取和设置元素滚动条到元素左边的位置。因此，你只需要容器的 <code>scrollLeft</code> 赋值为 distance，就可以实现 Item 元素滚动居中。</p>
<p>现在给出点击 tab 的函数的伪代码：</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token keyword" style="color:hsl(301, 63%, 40%)">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:hsl(221, 87%, 60%)">onClick</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:hsl(221, 87%, 60%)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">const</span><span class="token plain"> itemOffsetLeft </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> item</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token property-access">offsetLeft</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">const</span><span class="token plain"> halfItemWidth </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> item</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token property-access">offsetWidth</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">/</span><span class="token plain"> </span><span class="token number" style="color:hsl(35, 99%, 36%)">2</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">const</span><span class="token plain"> halfScreenWidth </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> </span><span class="token dom variable" style="color:hsl(221, 87%, 60%)">window</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token property-access">innerWidth</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">/</span><span class="token plain"> </span><span class="token number" style="color:hsl(35, 99%, 36%)">2</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  tabContainer</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token property-access">scrollLeft</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain"> itemOffsetLeft </span><span class="token operator" style="color:hsl(221, 87%, 60%)">+</span><span class="token plain"> halfItemWidth </span><span class="token operator" style="color:hsl(221, 87%, 60%)">-</span><span class="token plain"> halfScreenWidth</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="代码示例">代码示例<a href="https://lijunlin2022.github.io/blog/2023/07/30/tab-scroll-to-center#%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B" class="hash-link" aria-label="Direct link to 代��码示例" title="Direct link to 代码示例">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="vue">Vue<a href="https://lijunlin2022.github.io/blog/2023/07/30/tab-scroll-to-center#vue" class="hash-link" aria-label="Direct link to Vue" title="Direct link to Vue">​</a></h3>
<p><a href="https://codesandbox.io/p/sandbox/vue-tab-scroll-to-center-qxw4vc" target="_blank" rel="noopener noreferrer">Tab 滚动居中 | Vue</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="react">React<a href="https://lijunlin2022.github.io/blog/2023/07/30/tab-scroll-to-center#react" class="hash-link" aria-label="Direct link to React" title="Direct link to React">​</a></h3>
<p><a href="https://codesandbox.io/p/sandbox/react-tab-scroll-to-center-22939z" target="_blank" rel="noopener noreferrer">Tab 滚动居中 | React</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="微信小程序">微信小程序<a href="https://lijunlin2022.github.io/blog/2023/07/30/tab-scroll-to-center#%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F" class="hash-link" aria-label="Direct link to 微信小程序" title="Direct link to 微信小程序">​</a></h3>
<p><a href="https://developers.weixin.qq.com/s/npBjVpmj7XKc" target="_blank" rel="noopener noreferrer">Tab 滚动居中 | 微信小程序</a></p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>小程序的 API 和浏览器的 API 有差异。</p><ul>
<li><code>itemOffsetLeft</code> ，你需要从点击事件的 <code>event.currentTarget</code> 中获取。</li>
<li><code>halfItemWidth</code>，你需要先用 <code>wx.createSelectorQuery()</code> 选取到 Item 后，从 <code>exec()</code> 的执行结果中获取到 Item 整体宽度，然后再除以 2。</li>
<li><code>halfScreenWidth</code>，你需要先用 <code>wx.getSystemInfoSync()</code> 获取屏幕整体宽度，然后再除以 2。</li>
</ul><p>至于把 <code>distance</code> 设置到容器上，微信小程序 <code>scroll-view</code> 组件中，有 <code>scroll-left</code> 这个属性，你可以把 <code>distance</code> 赋值给 <code>scroll-left</code>。</p></div></div>]]></content:encoded>
            <category>tab</category>
            <category>vue</category>
            <category>react</category>
            <category>小程序</category>
        </item>
    </channel>
</rss>