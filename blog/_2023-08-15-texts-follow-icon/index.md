---
tags: ['css']
---

# 跟随图标的多行文本，如何溢出显示省略号

带图标的名字，是电商商品的常见组成部分，一般被用来区分特殊商品和普通商品。例如掘金的 VIP 课程、京东的自营商品等等。由于商品名称普遍比较长，UI 往往会要求程序员实现单行截断（双行截断）并显示省略号。

![](./img/juejin.png)

![](./img/jd.png)

## 文本缩进和绝对定位。

第一种方法，先给文字设置文本缩进属性 `text-indent`，空出一定的位置，然后再给图标设置绝对定位属性，将图标移动到刚才空出的位置上。

具体写法可以看例子：

[文本缩进和绝对定位 | codepen](https://codepen.io/lijunlin2022/pen/abQewmE)。

![](./img/03-texts-follow-icon.png)

这种方法优点是简单易懂，缺点是，**需要先实现知道图标的宽度，才能为图片空出准确的位置。**因此一旦下发的图标宽度有变化，就需要重新修改代码。

弥补这个缺陷的一个做法是，后端既下发图标的链接、也下发图标的宽度。这样即使图标改变了，前端代码也不需要改变。

## 浮动和文字环绕图片

第二种方法，利用浮动 `float` 的基础性质。浮动的最初用途，并不是做各种各样的布局，而是用来实现文字环绕图片。

具体写法可以看例子：

[浮动和文字环绕图片 | codepen](https://codepen.io/lijunlin2022/pen/abQewmE)。

这种方法的优点是可以实现图标的自适应，完全由图标撑开文字。缺点是里面用了一些 CSS 不常见的用法。

这种方法有两点需要注意：

其一，控制文本溢出的 css 类（例子中是 `ellipsis`），一定要放在图片和文字的父元素上。这是因为 `ellipsis` 自带 `display: -webkit-box;` 布局，如果此不放置在父元素上，会导致文字直接另起一行。

![](./img/04-texts-follow-icon.png)

其二，为了兼容 Safari，需要给图片和文字的父元素，再增加一层父元素，且把控制文本溢出的 css 类放到新增的元素上。这是因为 `display: -webkit-box;`，在 Safari 上会影响图片和文本的布局。[^1]

[^1]: [-Webkit-Box 在 Safari 中出现的兼容性问题](https://www.51cto.com/article/686659.html)
