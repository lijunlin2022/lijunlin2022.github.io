<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">从拼多多分享商品说起，canvas 绘图如何实现 contain 和 cover 效果？ | 小霖家的混江龙</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://lijunlin2022.github.io/blog/2024/07/11/canvas-image"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" name="google-site-verification" content="z1w9iBabIBZmBrBiQPn3K-e8msiNRO_hR9O3oWhdcok"><meta data-rh="true" property="og:title" content="从拼多多分享商品说起，canvas 绘图如何实现 contain 和 cover 效果？ | 小霖家的混江龙"><meta data-rh="true" name="description" content="我们偶尔会在一些 H5、小程序中，看到分享商品的功能。比如拼多多小程序中，用户可以把商品分享给自己的好友。分享图主要由 2 张图片组成，一张商品图，一张背景图。"><meta data-rh="true" property="og:description" content="我们偶尔会在一些 H5、小程序中，看到分享商品的功能。比如拼多多小程序中，用户可以把商品分享给自己的好友。分享图主要由 2 张图片组成，一张商品图，一张背景图。"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2024-07-11T00:00:00.000Z"><link data-rh="true" rel="icon" href="/img/logo.png"><link data-rh="true" rel="canonical" href="https://lijunlin2022.github.io/blog/2024/07/11/canvas-image"><link data-rh="true" rel="alternate" href="https://lijunlin2022.github.io/blog/2024/07/11/canvas-image" hreflang="en"><link data-rh="true" rel="alternate" href="https://lijunlin2022.github.io/blog/2024/07/11/canvas-image" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","@id":"https://lijunlin2022.github.io/blog/2024/07/11/canvas-image","mainEntityOfPage":"https://lijunlin2022.github.io/blog/2024/07/11/canvas-image","url":"https://lijunlin2022.github.io/blog/2024/07/11/canvas-image","headline":"从拼多多分享商品说起，canvas 绘图如何实现 contain 和 cover 效果？","name":"从拼多多分享商品说起，canvas 绘图如何实现 contain 和 cover 效果？","description":"我们偶尔会在一些 H5、小程序中，看到分享商品的功能。比如拼多多小程序中，用户可以把商品分享给自己的好友。分享图主要由 2 张图片组成，一张商品图，一张背景图。","datePublished":"2024-07-11T00:00:00.000Z","author":[],"keywords":[],"isPartOf":{"@type":"Blog","@id":"https://lijunlin2022.github.io/blog","name":"Blog"}}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="小霖家的混江龙 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="小霖家的混江龙 Atom Feed">




<link rel="alternate" type="application/rss+xml" href="/official/rss.xml" title="小霖家的混江龙 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/official/atom.xml" title="小霖家的混江龙 Atom Feed"><link rel="stylesheet" href="/assets/css/styles.f96e26e5.css">
<script src="/assets/js/runtime~main.4896c7eb.js" defer="defer"></script>
<script src="/assets/js/main.7f8d020a.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><b class="navbar__title text--truncate">小霖家的混江龙</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">技术博客</a><a class="navbar__item navbar__link" href="/docs/html/layout-visual-and-ideal-viewport">技术笔记</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/lijunlin2022" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><div role="group"><h3 class="yearGroupHeading_rMGB">2024</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/10/27/scroll-number">仿拼多多领红包、金额数字移动如何实现？</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/07/15/canvas-fill-text">从商品海报说起，canvas 文本如何实现溢出截断、溢出显示省略号和自动换行？</a></li><li class="sidebarItem__DBe"><a aria-current="page" class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href="/blog/2024/07/11/canvas-image">从拼多多分享商品说起，canvas 绘图如何实现 contain 和 cover 效果？</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/05/26/loop-notice">仿今日头条，H5 循环播放的通知栏如何实现？</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/05/17/reversible-card">仿微信读书，H5 翻转卡片如何实现？</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/05/07/springback">仿物美超市，H5 列表滚动回弹效果如何实现？</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/04/17/lottery-turntable">仿拼多多现金大转盘，H5 抽奖转盘如何实现？</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/04/08/waterfall-flow">对比小红书与电商三巨头的瀑布流，H5 瀑布流实现方案应该如何选择？</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/03/23/ten-billion-subsidy-load-img">仿百亿补贴，H5 中图片先模糊后清晰的效果如何实现？</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/03/10/is-webp-supported">H5、小程序能用 webp 图片吗？如何判断环境是否支持？</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/03/03/ten-billion-subsidy">百亿补贴为什么用 H5？H5 未来会如何发展？</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/03/02/pull-up">H5 上滑加载（触底加载）如何实现？</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/02/28/pull-down">H5 下拉刷新如何实现？</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/02/19/reverse-border-radius">H5、小程序中四个反向圆角的图片如何实现？</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/02/16/variable-height-swiper">H5、小程序高度变化的轮播图如何实现？</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/02/09/dragon-troubles-the-sea">H5 蛟龙闹海动画如何实现（不引用图片）？</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/02/03/parabolic-animation">H5、小程序商品加入购物车的抛物线动画如何实现？</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/01/27/offline-package-rollback">H5 离线包放入 HTML 后降级方案如何设计？</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/01/18/remainder-and-modulo">取余和取模如何区分与应用？</a></li></ul></div><div role="group"><h3 class="yearGroupHeading_rMGB">2023</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023/12/14/loop-swiper">H5 不复制元素的循环轮播图如何实现？——取模</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023/07/30/tab-scroll-to-center">H5、小程序 Tab 如何滚动居中？</a></li></ul></div></nav></aside><main class="col col--7"><article><header><h1 class="title_f1Hy">从拼多多分享商品说起，canvas 绘图如何实现 contain 和 cover 效果？</h1><div class="container_mt6G margin-vert--md"><time datetime="2024-07-11T00:00:00.000Z">July 11, 2024</time> · <!-- -->9 min read</div></header><div id="__blog-post-container" class="markdown"><p>我们偶尔会在一些 H5、小程序中，看到分享商品的功能。比如拼多多小程序中，用户可以把商品分享给自己的好友。分享图主要由 2 张图片组成，一张商品图，一张背景图。</p>
<p><img decoding="async" loading="lazy" src="/assets/images/pdd-05951001c8f3c5fea33fc2268b7cb8fa.jpg" width="400" height="335" class="img_ev3q"></p>
<p>商品图通常由商家自己配置，尺寸会变动，一般是 contain 效果；背景图通常由 UI 提供，尺寸固定，一般是 cover 效果。</p>
<p><img decoding="async" loading="lazy" src="/assets/images/contain-and-cover-4a7b23b6160b59a6dae609cb4712ad56.png" width="765" height="357" class="img_ev3q"></p>
<p>如果使用 css，我们可以给 <code>background-size</code> 设置 <code>contain</code> 和 <code>cover</code>，可惜这类分享图基本由 canvas 绘制而成。canvas 只提供了 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/drawImage" target="_blank" rel="noopener noreferrer">drawImage()</a> 绘制图片，无法精准实现 <code>contain</code> 和 <code>cover</code> 效果，于是我实现了 <code>drawContainImage</code> 和 <code>drawCoverImage</code> 两个工具函数。</p>
<p>本文我会先分析 contain 效果的<code>图片宽高比</code>和<code>容器宽高比</code>，并给出 drawContainImage 工具函数；再分析 cover 效果的<code>图片宽高比</code>和<code>容器宽高比</code>，并给出 drawCoverImage 工具函数；最后我会用两个工具函数，绘制如下分享图：</p>
<p><img decoding="async" loading="lazy" src="/assets/images/product-4d5aa81e90ba93d3a1789a936724767c.png" width="400" height="275" class="img_ev3q"></p>
<p>拳打 H5，脚踢小程序。我是「小霖家的混江龙」，关注我，带你了解更多实用的 H5、小程序武学。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="contain-效果">contain 效果<a href="#contain-效果" class="hash-link" aria-label="Direct link to contain 效果" title="Direct link to contain 效果">​</a></h2>
<p>先来看 contain 效果。contain 效果是「缩放图片以<strong>完全装入</strong>容器」，它会有两种情况：</p>
<ul>
<li>图片宽高比 &lt; 容器宽高比，缩放后图片宽度 &lt; 容器宽度，图片高度 = 容器高度。</li>
<li>图片宽高比 &gt; 容器宽高比，缩放后图片宽度 = 容器宽度，图片高度 &lt; 容器高度。</li>
</ul>
<p><img decoding="async" loading="lazy" src="/assets/images/canvas-contain-948b334521d89ebc949cf6598e343a32.png" width="1179" height="572" class="img_ev3q"></p>
<p>不难看出，contain 效果下，图片总是完整展示的，因此我们不必考虑裁剪图片。<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/drawImage" target="_blank" rel="noopener noreferrer">drawImage</a> 的 9 个参数中，我们只需要考虑 5 个参数：</p>
<blockquote>
<ul>
<li><code>image</code>，画布图像源。</li>
<li><code>dx</code>，image 的左上角在目标画布上 X 轴坐标。</li>
<li><code>dy</code>，image 的左上角在目标画布上 Y 轴坐标。</li>
<li><code>dw</code>，image 在目标画布上绘制的宽度。</li>
<li><code>dh</code>，image 在目标画布上绘制的高度。</li>
</ul>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="图片宽高比--容器宽高比">图片宽高比 &lt; 容器宽高比<a href="#图片宽高比--容器宽高比" class="hash-link" aria-label="Direct link to 图片宽高比 &lt; 容器宽高比" title="Direct link to 图片宽高比 &lt; 容器宽高比">​</a></h3>
<p>图片宽高比 &lt; 容器宽高比时，dy，dw 和 dh 可以直观看出来，而 dx 还需要单独计算。如下图所示：</p>
<p><img decoding="async" loading="lazy" src="/assets/images/canvas-contain-imgRatio-le-canvasRatio-b9832b8b9d37b9a4611c8f3070f50654.png" width="637" height="445" class="img_ev3q"></p>
<ul>
<li>dx 是 image 的左上角在目标画布上 X 轴坐标，<code>dx = (width - dw) / 2</code>；</li>
<li>dy 是 image 的左上角在目标画布上 Y 轴坐标，<code>dy = 0</code>；</li>
<li>dw 是 image 在目标画布上绘制的宽度，<code>dw = imgRatio * width</code>；</li>
<li>dh 是 image 在目标画布上绘制的高度，<code>dh = height</code>。</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="图片宽高比--容器宽高比-1">图片宽高比 &gt; 容器宽高比<a href="#图片宽高比--容器宽高比-1" class="hash-link" aria-label="Direct link to 图片宽高比 &gt; 容器宽高比" title="Direct link to 图片宽高比 &gt; 容器宽高比">​</a></h3>
<p>图片宽高比 &gt; 容器宽高比时，dx，dw 和 dh 可以直观看出来，而 dy 还需要单独计算。如下图所示：</p>
<p><img decoding="async" loading="lazy" src="/assets/images/canvas-contain-imgRatio-ge-canvasRatio-0ffe824b46c5c3560244a030006c088b.png" width="669" height="323" class="img_ev3q"></p>
<ul>
<li>dx 是 image 的左上角在目标画布上 X 轴坐标，<code>dx = 0</code>；</li>
<li>dy 是 image 的左上角在目标画布上 Y 轴坐标，<code>dy = (height - dh) / 2</code>；</li>
<li>dw 是 image 在目标画布上绘制的宽度，<code>dw = width</code>；</li>
<li>dh 是 image 在目标画布上绘制的高度，<code>dh = dw / imgRatio</code>。</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="drawcontainimage-代码">drawContainImage 代码<a href="#drawcontainimage-代码" class="hash-link" aria-label="Direct link to drawContainImage 代码" title="Direct link to drawContainImage 代码">​</a></h3>
<p>下面是 drawContainImage 的代码，因为 contain 效果一般会留有空白，所以我增加了一个 fillStyle 参数，用来设置空白部分的颜色。</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">function</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">drawContainImage</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token parameter punctuation" style="color:#f8f8f2">{</span><span class="token parameter"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token parameter">  ctx</span><span class="token parameter punctuation" style="color:#f8f8f2">,</span><span class="token parameter"> img</span><span class="token parameter punctuation" style="color:#f8f8f2">,</span><span class="token parameter"> x</span><span class="token parameter punctuation" style="color:#f8f8f2">,</span><span class="token parameter"> y</span><span class="token parameter punctuation" style="color:#f8f8f2">,</span><span class="token parameter"> width</span><span class="token parameter punctuation" style="color:#f8f8f2">,</span><span class="token parameter"> height</span><span class="token parameter punctuation" style="color:#f8f8f2">,</span><span class="token parameter"> fillStyle</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token parameter"></span><span class="token parameter punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#66d9ef">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">fillStyle</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    ctx</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">fillStyle</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> fillStyle</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    ctx</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">fillRect</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> y</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> width</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> height</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> boxRatio </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> width </span><span class="token operator" style="color:#66d9ef">/</span><span class="token plain"> height</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> imgRatio </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> img</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">width</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">/</span><span class="token plain"> img</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">height</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">let</span><span class="token plain"> dx </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> dy </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> dw </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> dh </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#66d9ef">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">imgRatio </span><span class="token operator" style="color:#66d9ef">&lt;=</span><span class="token plain"> boxRatio</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    dw </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> imgRatio </span><span class="token operator" style="color:#66d9ef">*</span><span class="token plain"> width</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    dh </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> height</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    dx </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">width </span><span class="token operator" style="color:#66d9ef">-</span><span class="token plain"> dw</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">/</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    dy </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#66d9ef">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    dw </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> width</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    dh </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> dw </span><span class="token operator" style="color:#66d9ef">/</span><span class="token plain"> imgRatio</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    dx </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    dy </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">height </span><span class="token operator" style="color:#66d9ef">-</span><span class="token plain"> dh</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">/</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  ctx</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">drawImage</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">img</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> x </span><span class="token operator" style="color:#66d9ef">+</span><span class="token plain"> dx</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> y </span><span class="token operator" style="color:#66d9ef">+</span><span class="token plain"> dy</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> dw</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> dh</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="cover-效果">cover 效果<a href="#cover-效果" class="hash-link" aria-label="Direct link to cover 效果" title="Direct link to cover 效果">​</a></h2>
<p>再看 cover 效果，cover 效果是「缩放图片以<strong>完全覆盖</strong>容器」。如下示意图所示，缩放后图片（红色部分）比容器（绿色部分）大。它会有两种情况：</p>
<ul>
<li>图片宽高比 &gt; 容器宽高比，缩放后图片宽度 = 容器宽度，图片高度 &gt; 容器高度。</li>
<li>图片宽高比 &lt; 容器宽高比，缩放后图片宽度 &lt; 容器宽度，图片高度 = 容器高度。</li>
</ul>
<p><img decoding="async" loading="lazy" src="/assets/images/canvas-cover-ca100422dfd200338929f170c0f7efda.png" width="957" height="531" class="img_ev3q"></p>
<p>不难看出，contain 效果下，图片总是需要裁剪图片，所以 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/drawImage" target="_blank" rel="noopener noreferrer">drawImage</a> 的 9 个参数我们都需要使用：</p>
<blockquote>
<ul>
<li><code>image</code>，画布图像源。</li>
<li><code>sx</code>，image 的矩形（裁剪）选择框的左上角 X 轴坐标。</li>
<li><code>sy</code>，image 的矩形（裁剪）选择框的左上角 Y 轴坐标。</li>
<li><code>sw</code>，image 的矩形（裁剪）选择框的宽度。</li>
<li><code>sh</code>，image的矩形（裁剪）选择框的高度。</li>
<li><code>dx</code>，image 的左上角在目标画布上 X 轴坐标。</li>
<li><code>dy</code>，image 的左上角在目标画布上 Y 轴坐标。</li>
<li><code>dw</code>，image 在目标画布上绘制的宽度。</li>
<li><code>dh</code>，image 在目标画布上绘制的高度。</li>
</ul>
</blockquote>
<p>幸运的是，contain 效果下，dx, dy, dw 和 dh 的取值都是固定的，所以我们需要着重考虑的只有 sx, sy, sw 和 sh 这 4 个参数。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="图片宽高比--容器宽高比-2">图片宽高比 &gt; 容器宽高比<a href="#图片宽高比--容器宽高比-2" class="hash-link" aria-label="Direct link to 图片宽高比 &gt; 容器宽高比" title="Direct link to 图片宽高比 &gt; 容器宽高比">​</a></h3>
<p>图片宽高比 &gt; 容器宽高比时，sy，sw 和 sh 可以直观看出来，而 sx 还需要单独计算。如下图所示：</p>
<p><img decoding="async" loading="lazy" src="/assets/images/canvas-cover-imgRatio-ge-canvasRatio-4f6a92091f45a1602bcc6d5385fe044b.png" width="647" height="316" class="img_ev3q"></p>
<ul>
<li>sx 是 image 裁剪选择框（绿色部分）的左上角 X 轴坐标，<code>sx = (img.width - sw) / 2</code>；</li>
<li>sy 是 image 裁剪选择框（绿色部分）的左上角 Y 轴坐标，<code>sy = 0</code>；</li>
<li>sw 是 image 裁剪选择框（绿色部分）的宽度，<code>sw = sh * boxRatio</code>；</li>
<li>sh 是 image 裁剪选择框（绿色部分）的高度，<code>sh = img.height</code>。</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="图片宽高比--容器宽高比-3">图片宽高比 &lt; 容器宽高比<a href="#图片宽高比--容器宽高比-3" class="hash-link" aria-label="Direct link to 图片宽高比 &lt; 容器宽高比" title="Direct link to 图片宽高比 &lt; 容器宽高比">​</a></h3>
<p>图片宽高比 &lt; 容器宽高比时，sx, sw 和 sh 可以直观看出来，而 sy 还需要单独计算。如下图所示：</p>
<p><img decoding="async" loading="lazy" src="/assets/images/canvas-cover-imgRatio-le-canvasRatio-03ca3495c9f340cb4004d73ec4935a61.png" width="467" height="316" class="img_ev3q"></p>
<ul>
<li>sx 是 image 裁剪选择框（绿色部分）的左上角 X 轴坐标，<code>sx = 0</code>；</li>
<li>sy 是 image 裁剪选择框（绿色部分）的左上角 Y 轴坐标，<code>sy = (img.height - sh) / 2</code>；</li>
<li>sw 是 image 裁剪选择框（绿色部分）的宽度，<code>sw = img.width</code>；</li>
<li>sh 是 image 裁剪选择框（绿色部分）的高度，<code>sh = sw / boxRatio</code>。</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="drawcoverimage-代码">drawCoverImage 代码<a href="#drawcoverimage-代码" class="hash-link" aria-label="Direct link to drawCoverImage 代码" title="Direct link to drawCoverImage 代码">​</a></h3>
<p>下面是 drawCoverImage 的代码，因为 cover 效果不会留空白，所以不需要 fillStyle 参数。</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">function</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">drawCoverImage</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token parameter punctuation" style="color:#f8f8f2">{</span><span class="token parameter"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token parameter">  ctx</span><span class="token parameter punctuation" style="color:#f8f8f2">,</span><span class="token parameter"> img</span><span class="token parameter punctuation" style="color:#f8f8f2">,</span><span class="token parameter"> x</span><span class="token parameter punctuation" style="color:#f8f8f2">,</span><span class="token parameter"> y</span><span class="token parameter punctuation" style="color:#f8f8f2">,</span><span class="token parameter"> width</span><span class="token parameter punctuation" style="color:#f8f8f2">,</span><span class="token parameter"> height</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token parameter"></span><span class="token parameter punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> boxRatio </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> width </span><span class="token operator" style="color:#66d9ef">/</span><span class="token plain"> height</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> imgRatio </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> img</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">width</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">/</span><span class="token plain"> img</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">height</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">let</span><span class="token plain"> sx </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> sy </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> sw </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> sh </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#66d9ef">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">imgRatio </span><span class="token operator" style="color:#66d9ef">&lt;=</span><span class="token plain"> boxRatio</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    sw </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> img</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">width</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    sh </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> sw </span><span class="token operator" style="color:#66d9ef">/</span><span class="token plain"> boxRatio</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    sx </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    sy </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">img</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">height</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token plain"> sh</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">/</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#66d9ef">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    sh </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> img</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">height</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    sw </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> sh </span><span class="token operator" style="color:#66d9ef">*</span><span class="token plain"> boxRatio</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    sx </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">img</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">width</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">-</span><span class="token plain"> sw</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">/</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    sy </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  ctx</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">drawImage</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">img</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> sx</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> sy</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> sw</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> sh</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> x</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> y</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> width</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> height</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="完整代码">完整代码<a href="#完整代码" class="hash-link" aria-label="Direct link to 完整代码" title="Direct link to 完整代码">​</a></h2>
<p>完整代码可以在码上掘金上查看：<a href="https://code.juejin.cn/pen/7388885726391992371" target="_blank" rel="noopener noreferrer">https://code.juejin.cn/pen/7388885726391992371</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="总结">总结<a href="#总结" class="hash-link" aria-label="Direct link to 总结" title="Direct link to 总结">​</a></h2>
<p>本文我分析了 contain 效果、cover 效果的<code>图片宽高比</code>和<code>容 器宽高比</code>关系，并给出 drawContainImage 和 drawCoverImage 工具函数，最后用两个工具函数，绘制了一个商品分享图。</p>
<p>拳打 H5，脚踢小程序。我是「小霖家的混江龙」，关注我，带你了解更多实用的 H5、小程序武学。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="参考文章">参考文章<a href="#参考文章" class="hash-link" aria-label="Direct link to 参考文章" title="Direct link to 参考文章">​</a></h2>
<ul>
<li><a href="https://www.cnblogs.com/AIonTheRoad/p/14063041.html" target="_blank" rel="noopener noreferrer">canvas drawImage 绘图实现 contain 和 cover 的效果</a></li>
<li><a href="https://developer.aliyun.com/article/916087" target="_blank" rel="noopener noreferrer">在容器内显示图片的五种方案：contain、cover、fill、none、scale-down</a></li>
</ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/2024/07/15/canvas-fill-text"><div class="pagination-nav__sublabel">Newer post</div><div class="pagination-nav__label">从商品海报说起，canvas 文本如何实现溢出截断、溢出显示省略号和自动换行？</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/blog/2024/05/26/loop-notice"><div class="pagination-nav__sublabel">Older post</div><div class="pagination-nav__label">仿今日头条，H5 循环播放的通知栏如何实现？</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#contain-效果" class="table-of-contents__link toc-highlight">contain 效果</a><ul><li><a href="#图片宽高比--容器宽高比" class="table-of-contents__link toc-highlight">图片宽高比 &lt; 容器宽高比</a></li><li><a href="#图片宽高比--容器宽高比-1" class="table-of-contents__link toc-highlight">图片宽高比 &gt; 容器宽高比</a></li><li><a href="#drawcontainimage-代码" class="table-of-contents__link toc-highlight">drawContainImage 代码</a></li></ul></li><li><a href="#cover-效果" class="table-of-contents__link toc-highlight">cover 效果</a><ul><li><a href="#图片宽高比--容器宽高比-2" class="table-of-contents__link toc-highlight">图片宽高比 &gt; 容器宽高比</a></li><li><a href="#图片宽高比--容器宽高比-3" class="table-of-contents__link toc-highlight">图片宽高比 &lt; 容器宽高比</a></li><li><a href="#drawcoverimage-代码" class="table-of-contents__link toc-highlight">drawCoverImage 代码</a></li></ul></li><li><a href="#完整代码" class="table-of-contents__link toc-highlight">完整代码</a></li><li><a href="#总结" class="table-of-contents__link toc-highlight">总结</a></li><li><a href="#参考文章" class="table-of-contents__link toc-highlight">参考文章</a></li></ul></div></div></div></div></div></div>
</body>
</html>