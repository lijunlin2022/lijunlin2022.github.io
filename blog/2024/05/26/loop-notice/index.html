<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">仿今日头条，H5 循环播放的通知栏如何实现？ | 小霖家的混江龙</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://lijunlin2022.github.io/blog/2024/05/26/loop-notice"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" name="google-site-verification" content="z1w9iBabIBZmBrBiQPn3K-e8msiNRO_hR9O3oWhdcok"><meta data-rh="true" property="og:title" content="仿今日头条，H5 循环播放的通知栏如何实现？ | 小霖家的混江龙"><meta data-rh="true" name="description" content="我们在各大 App 活动页面，经常会看到循环播放的通知栏。比如春节期间，我就在今日头条 App 中看到了如下通知：「春节期间，部分商品受物流影响延迟发货，请耐心等待，祝你新春快乐！」。"><meta data-rh="true" property="og:description" content="我们在各大 App 活动页面，经常会看到循环播放的通知栏。比如春节期间，我就在今日头条 App 中看到了如下通知：「春节期间，部分商品受物流影响延迟发货，请耐心等待，祝你新春快乐！」。"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2024-05-26T00:00:00.000Z"><link data-rh="true" rel="icon" href="/img/logo.png"><link data-rh="true" rel="canonical" href="https://lijunlin2022.github.io/blog/2024/05/26/loop-notice"><link data-rh="true" rel="alternate" href="https://lijunlin2022.github.io/blog/2024/05/26/loop-notice" hreflang="en"><link data-rh="true" rel="alternate" href="https://lijunlin2022.github.io/blog/2024/05/26/loop-notice" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","@id":"https://lijunlin2022.github.io/blog/2024/05/26/loop-notice","mainEntityOfPage":"https://lijunlin2022.github.io/blog/2024/05/26/loop-notice","url":"https://lijunlin2022.github.io/blog/2024/05/26/loop-notice","headline":"仿今日头条，H5 循环播放的通知栏如何实现？","name":"仿今日头条，H5 循环播放的通知栏如何实现？","description":"我们在各大 App 活动页面，经常会看到循环播放的通知栏。比如春节期间，我就在今日头条 App 中看到了如下通知：「春节期间，部分商品受物流影响延迟发货，请耐心等待，祝你新春快乐！」。","datePublished":"2024-05-26T00:00:00.000Z","author":[],"keywords":[],"isPartOf":{"@type":"Blog","@id":"https://lijunlin2022.github.io/blog","name":"Blog"}}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="小霖家的混江龙 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="小霖家的混江龙 Atom Feed">




<link rel="alternate" type="application/rss+xml" href="/official/rss.xml" title="小霖家的混江龙 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/official/atom.xml" title="小霖家的混江龙 Atom Feed"><link rel="stylesheet" href="/assets/css/styles.f96e26e5.css">
<script src="/assets/js/runtime~main.4896c7eb.js" defer="defer"></script>
<script src="/assets/js/main.7f8d020a.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><b class="navbar__title text--truncate">小霖家的混江龙</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">技术博客</a><a class="navbar__item navbar__link" href="/docs/html/layout-visual-and-ideal-viewport">技术笔记</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/lijunlin2022" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><div role="group"><h3 class="yearGroupHeading_rMGB">2024</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/10/27/scroll-number">仿拼多多领红包、金额数字移动如何实现？</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/07/15/canvas-fill-text">从商品海报说起，canvas 文本如何实现溢出截断、溢出显示省略号和自动换行？</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/07/11/canvas-image">从拼多多分享商品说起，canvas 绘图如何实现 contain 和 cover 效果？</a></li><li class="sidebarItem__DBe"><a aria-current="page" class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href="/blog/2024/05/26/loop-notice">仿今日头条，H5 循环播放的通知栏如何实现？</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/05/17/reversible-card">仿微信读书，H5 翻转卡片如何实现？</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/05/07/springback">仿物美超市，H5 列表滚动回弹效果如何实现？</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/04/17/lottery-turntable">仿拼多多现金大转盘，H5 抽奖转盘如何实现？</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/04/08/waterfall-flow">对比小红书与电商三巨头的瀑布流，H5 瀑布流实现方案应该如何选择？</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/03/23/ten-billion-subsidy-load-img">仿百亿补贴，H5 中图片先模糊后清晰的效果如何实现？</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/03/10/is-webp-supported">H5、小程序能用 webp 图片吗？如何判断环境是否支持？</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/03/03/ten-billion-subsidy">百亿补贴为什么用 H5？H5 未来会如何发展？</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/03/02/pull-up">H5 上滑加载（触底加载）如何实现？</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/02/28/pull-down">H5 下拉刷新如何实现？</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/02/19/reverse-border-radius">H5、小程序中四个反向圆角的图片如何实现？</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/02/16/variable-height-swiper">H5、小程序高度变化的轮播图如何实现？</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/02/09/dragon-troubles-the-sea">H5 蛟龙闹海动画如何实现（不引用图片）？</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/02/03/parabolic-animation">H5、小程序商品加入购物车的抛物线动画如何实现？</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/01/27/offline-package-rollback">H5 离线包放入 HTML 后降级方案如何设计？</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2024/01/18/remainder-and-modulo">取余和取模如何区分与应用？</a></li></ul></div><div role="group"><h3 class="yearGroupHeading_rMGB">2023</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023/12/14/loop-swiper">H5 不复制元素的循环轮播图如何实现？——取模</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023/07/30/tab-scroll-to-center">H5、小程序 Tab 如何滚动居中？</a></li></ul></div></nav></aside><main class="col col--7"><article><header><h1 class="title_f1Hy">仿今日头条，H5 循环播放的通知栏如何实现？</h1><div class="container_mt6G margin-vert--md"><time datetime="2024-05-26T00:00:00.000Z">May 26, 2024</time> · <!-- -->6 min read</div></header><div id="__blog-post-container" class="markdown"><p>我们在各大 App 活动页面，经常会看到循环播放的通知栏。比如春节期间，我就在今日头条 App 中看到了如下通知：「春节期间，部分商品受物流影响延迟发货，请耐心等待，祝你新春快乐！」。</p>
<p><img decoding="async" loading="lazy" src="/assets/images/toutiao-7c71bddb58a2a3df165ed6697dc32e57.gif" width="360" height="74" class="img_ev3q"></p>
<p>那么，这种循环播放的通知栏如何实现呢？本文我会先介绍它的布局、再介绍它的逻辑，并给出完整的代码。最终我实现的效果如下：</p>
<p><img decoding="async" loading="lazy" src="/assets/images/loop-notice-6e8ad9e14239cc81f04bbee5e6dee51f.gif" width="360" height="60" class="img_ev3q"></p>
<p>拳打 H5，脚踢小程序。我是「小霖家的混江龙」，关注我，带你了解更多实用的 H5、小程序武学。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="布局 代码">布局代码<a href="#布局代码" class="hash-link" aria-label="Direct link to 布局代码" title="Direct link to 布局代码">​</a></h2>
<p>我们先看布局，如下图所示，循环播放的布局不是普通的左中右布局。可以看到，当文字向左移动时，左边的通知 Icon 和右边的留白会把文字挡住一部分。</p>
<p><img decoding="async" loading="lazy" src="data:image/png;base64,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" width="360" height="80" class="img_ev3q"></p>
<p>为了实现这样的效果，我们给容器 box 设置一个相对定位，并把 box 中的 HTML 代码分为三部分：</p>
<ul>
<li>第一部分是 content，它包裹着需要循环播放的文字；</li>
<li>第二部分是 left，它是左边的通知 Icon，我们给它设置绝对定位和 <code>left: 0;</code>；</li>
<li>第三部分是 right，它是右边的留白，我们给它设置绝对定位和 <code>right: 0;</code>。</li>
</ul>
<div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">div</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">&quot;</span><span class="token tag attr-value" style="color:#f92672">box</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">&quot;</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">div</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">&quot;</span><span class="token tag attr-value" style="color:#f92672">content</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">&quot;</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token comment" style="color:#8292a2;font-style:italic">&lt;!-- ... 省略 --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">div</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">&quot;</span><span class="token tag attr-value" style="color:#f92672">left</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">&quot;</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain">🔔</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">div</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">&quot;</span><span class="token tag attr-value" style="color:#f92672">right</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">&quot;</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-css codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-css codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token selector class" style="color:#a6e22e;font-style:italic">.box</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">position</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> relative</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">overflow</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> hidden</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token comment" style="color:#8292a2;font-style:italic">/* ... 省略 */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token selector class" style="color:#a6e22e;font-style:italic">.left</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">position</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> absolute</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">left</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token comment" style="color:#8292a2;font-style:italic">/* ... 省略 */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token selector class" style="color:#a6e22e;font-style:italic">.right</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">position</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> absolute</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property" style="color:#f92672">right</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token comment" style="color:#8292a2;font-style:italic">/* ... 省略 */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>现在我们来看包裹文字的 content。content 内部包裹了三段一模一样的文字 notice，每段 notice 之间还有一个 space 元素作为间距。</p>
<div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#8292a2;font-style:italic">&lt;!-- ... 省略 --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">div</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">&quot;</span><span class="token tag attr-value" style="color:#f92672">content</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">&quot;</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">div</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">&quot;</span><span class="token tag attr-value" style="color:#f92672">notice</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">&quot;</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain">春节期间，部分商品...</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">div</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">&quot;</span><span class="token tag attr-value" style="color:#f92672">space</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">&quot;</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">div</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">&quot;</span><span class="token tag attr-value" style="color:#f92672">notice</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">&quot;</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain">春节期间，部分商品...</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">div</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">&quot;</span><span class="token tag attr-value" style="color:#f92672">space</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">&quot;</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token tag punctuation" style="color:#f8f8f2">&lt;</span><span class="token tag" style="color:#f92672">div</span><span class="token tag" style="color:#f92672"> </span><span class="token tag attr-name" style="color:#a6e22e !important">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#f8f8f2">=</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">&quot;</span><span class="token tag attr-value" style="color:#f92672">notice</span><span class="token tag attr-value punctuation" style="color:#f8f8f2">&quot;</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain">春节期间，部分商品...</span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token tag punctuation" style="color:#f8f8f2">&lt;/</span><span class="token tag" style="color:#f92672">div</span><span class="token tag punctuation" style="color:#f8f8f2">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#8292a2;font-style:italic">&lt;!-- ... 省略 --&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>为什么要放置三段一模一样的文字呢？这和循环播放的逻辑有关。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="逻辑代码">逻辑代码<a href="#逻辑代码" class="hash-link" aria-label="Direct link to 逻辑代码" title="Direct link to 逻辑代码">​</a></h2>
<p>我们并没有实现真正的循环播放，而是欺骗了用户的视觉。如下图所示：</p>
<ul>
<li>
<p>播放通知时，content 从 0 开始向左移动。</p>
</li>
<li>
<p>向左移动 <code>2 * noticeWidth + spaceWidth</code> 时，继续向左移动便会露馅。因为第 3 段文字后不会有第 4 段文字。</p>
<p>如果我们把 content 向左移动的距离强行从 <code>2 * noticeWidth + spaceWidth</code> 改为 <code>noticeWidth</code>，不难看出，用户在 box 可视区域内看到的情况基本一致的。</p>
<p>然后 content 继续向左移动，向左移动的距离大于等于 <code>2 * noticeWidth + spaceWidth</code> 时，就把距离重新设为 <code>noticeWidth</code>。循环往复，就能欺骗用户视觉，让用户认为 content 能无休无止向左移动。</p>
</li>
</ul>
<p><img decoding="async" loading="lazy" src="/assets/images/no-overflow-with-comment-fa7243d8c7538c8dfeb1a86d19de0f14.png" width="970" height="329" class="img_ev3q"></p>
<p>欺骗视觉的代码如下：</p>
<ul>
<li>我们通过修改 translateX，让 content 不断地向左移动，每次向左移动 1.5px；</li>
<li>当 <code>translateX &gt;= noticeWidth * 2 + spaceWidth</code> 时，我们又会把 translateX 强制设为 <code>noticeWidth</code>；</li>
<li>为了保证移动动画更丝滑，我们并没有采用 setInterval，而是使用 requestAnimationFrame。</li>
</ul>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> content </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token dom variable" style="color:#f8f8f2">document</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">getElementById</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">&quot;content&quot;</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> notice </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token dom variable" style="color:#f8f8f2">document</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">getElementsByClassName</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">&quot;notice&quot;</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> space </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token dom variable" style="color:#f8f8f2">document</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token method function property-access" style="color:#e6db74">getElementsByClassName</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token string" style="color:#a6e22e">&quot;space&quot;</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> noticeWidth </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> notice</span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token number" style="color:#ae81ff">0</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">offsetWidth</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> spaceWidth </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> space</span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token number" style="color:#ae81ff">0</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">offsetWidth</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">let</span><span class="token plain"> translateX </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">0</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#66d9ef">function</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">move</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  translateX </span><span class="token operator" style="color:#66d9ef">+=</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">1.5</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#66d9ef">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">translateX </span><span class="token operator" style="color:#66d9ef">&gt;=</span><span class="token plain"> noticeWidth </span><span class="token operator" style="color:#66d9ef">*</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">2</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">+</span><span class="token plain"> spaceWidth</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    translateX </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> noticeWidth</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  content</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">style</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token property-access">transform</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#a6e22e">`</span><span class="token template-string string" style="color:#a6e22e">translateX(</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#f8f8f2">${</span><span class="token template-string interpolation operator" style="color:#66d9ef">-</span><span class="token template-string interpolation">translateX</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#f8f8f2">}</span><span class="token template-string string" style="color:#a6e22e">px)</span><span class="token template-string template-punctuation string" style="color:#a6e22e">`</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token function" style="color:#e6db74">requestAnimationFrame</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">move</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token function" style="color:#e6db74">move</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="完整代码">完整代码<a href="#完整代码" class="hash-link" aria-label="Direct link to 完整代码" title="Direct link to 完整代码">​</a></h2>
<p>完整代码如下，你可以在 codepen 或者码上掘金上查看。</p>
<ul>
<li>codepen: <a href="https://codepen.io/lijunlin2022/pen/rNgMrwg" target="_blank" rel="noopener noreferrer">https://codepen.io/lijunlin2022/pen/rNgMrwg</a></li>
<li>码上掘  金: <a href="https://code.juejin.cn/pen/7373131233506623538" target="_blank" rel="noopener noreferrer">https://code.juejin.cn/pen/7373131233506623538</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="总结">总结<a href="#总结" class="hash-link" aria-label="Direct link to 总结" title="Direct link to 总结">​</a></h2>
<p>本文我介绍了如何用 H5 实现循环播放的通知栏：</p>
<ul>
<li>布局方面，我们需要用绝对定位的通知 Icon、留白挡住循环文字的左侧和右侧；此外，循环播放的文字我们额外复制 2 份。</li>
<li>逻辑方面，通知栏向左移动 <code>2 * noticeWidth + spaceWidth</code> 后，我们需要强制把通知栏向左移动的距离从 <code>2 * noticeWidth + spaceWidth</code> 变为 <code>noticeWidth</code>，以此来欺骗用户视觉。</li>
</ul>
<p>拳打 H5，脚踢小程序。我是「小霖家的混江龙」，关注我，带你了解更多实用的 H5、小程序武学。</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/2024/07/11/canvas-image"><div class="pagination-nav__sublabel">Newer post</div><div class="pagination-nav__label">从拼多多分享商品说起，canvas 绘图如何实现 contain 和 cover 效果？</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/blog/2024/05/17/reversible-card"><div class="pagination-nav__sublabel">Older post</div><div class="pagination-nav__label">仿微信读书，H5 翻转卡片如何实现？</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#布局代码" class="table-of-contents__link toc-highlight">布局代码</a></li><li><a href="#逻辑代码" class="table-of-contents__link toc-highlight">逻辑代码</a></li><li><a href="#完整代码" class="table-of-contents__link toc-highlight">完整代码</a></li><li><a href="#总结" class="table-of-contents__link toc-highlight">总结</a></li></ul></div></div></div></div></div></div>
</body>
</html>